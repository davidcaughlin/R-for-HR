<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 18 Filtering Data | R for HR: An Introduction to Human Resource Analytics Using R BOOK UNDER CONSTRUCTION</title>
  <meta name="description" content="Human resource (HR) analytics is a growing area of HR manage, and the purpose of this book is to show how the R programming language can be used as tool to manage, analyze, and visualize HR data in order to derive insights and to inform decision making. [NOTE: This book is currently under construction.]" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 18 Filtering Data | R for HR: An Introduction to Human Resource Analytics Using R BOOK UNDER CONSTRUCTION" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://rforhr.com" />
  <meta property="og:image" content="https://rforhr.comcover.png" />
  <meta property="og:description" content="Human resource (HR) analytics is a growing area of HR manage, and the purpose of this book is to show how the R programming language can be used as tool to manage, analyze, and visualize HR data in order to derive insights and to inform decision making. [NOTE: This book is currently under construction.]" />
  <meta name="github-repo" content="davidcaughlin/R-for-HR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 18 Filtering Data | R for HR: An Introduction to Human Resource Analytics Using R BOOK UNDER CONSTRUCTION" />
  
  <meta name="twitter:description" content="Human resource (HR) analytics is a growing area of HR manage, and the purpose of this book is to show how the R programming language can be used as tool to manage, analyze, and visualize HR data in order to derive insights and to inform decision making. [NOTE: This book is currently under construction.]" />
  <meta name="twitter:image" content="https://rforhr.comcover.png" />

<meta name="author" content="David E. Caughlin" />


<meta name="date" content="2021-04-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="join.html"/>
<link rel="next" href="clean.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for HR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#hragrowth"><i class="fa fa-check"></i><b>0.1</b> Growth of HR Analytics</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#skills-gap"><i class="fa fa-check"></i><b>0.2</b> Skills Gap</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#hraplc"><i class="fa fa-check"></i><b>0.3</b> Project Life Cycle Perspective</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#philosophy"><i class="fa fa-check"></i><b>0.4</b> My Philosophy for This Book</a>
<ul>
<li class="chapter" data-level="0.4.1" data-path="index.html"><a href="index.html#rationalerpref"><i class="fa fa-check"></i><b>0.4.1</b> Rationale for Using R</a></li>
<li class="chapter" data-level="0.4.2" data-path="index.html"><a href="index.html#audiencepref"><i class="fa fa-check"></i><b>0.4.2</b> Audience</a></li>
<li class="chapter" data-level="0.4.3" data-path="index.html"><a href="index.html#structurepref"><i class="fa fa-check"></i><b>0.4.3</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#aboutauthor"><i class="fa fa-check"></i><b>0.5</b> About the Author</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#acknowpref"><i class="fa fa-check"></i><b>0.6</b> Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I HR Analytics Project Life Cycle</b></span></li>
<li class="chapter" data-level="1" data-path="overviewhraplc.html"><a href="overviewhraplc.html"><i class="fa fa-check"></i><b>1</b> Overview of HR Analytics Project Life Cycle</a></li>
<li class="chapter" data-level="2" data-path="questionformulation.html"><a href="questionformulation.html"><i class="fa fa-check"></i><b>2</b> Question Formulation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="questionformulation.html"><a href="questionformulation.html#adoptstrategicmindset"><i class="fa fa-check"></i><b>2.1</b> Adopting a Strategic Mindset</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="questionformulation.html"><a href="questionformulation.html#strategy"><i class="fa fa-check"></i><b>2.1.1</b> Strategy</a></li>
<li class="chapter" data-level="2.1.2" data-path="questionformulation.html"><a href="questionformulation.html#strategyformulation"><i class="fa fa-check"></i><b>2.1.2</b> Strategy Formulation</a></li>
<li class="chapter" data-level="2.1.3" data-path="questionformulation.html"><a href="questionformulation.html#strategyimplementation"><i class="fa fa-check"></i><b>2.1.3</b> Strategy Implementation</a></li>
<li class="chapter" data-level="2.1.4" data-path="questionformulation.html"><a href="questionformulation.html#strategichrm"><i class="fa fa-check"></i><b>2.1.4</b> Strategic Human Resource Management</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="questionformulation.html"><a href="questionformulation.html#defining-problems-formulating-questions"><i class="fa fa-check"></i><b>2.2</b> Defining Problems &amp; Formulating Questions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="questionformulation.html"><a href="questionformulation.html#definingaproblem"><i class="fa fa-check"></i><b>2.2.1</b> Defining a Problem</a></li>
<li class="chapter" data-level="2.2.2" data-path="questionformulation.html"><a href="questionformulation.html#formulatingaquestion"><i class="fa fa-check"></i><b>2.2.2</b> Formulating a Question</a></li>
<li class="chapter" data-level="2.2.3" data-path="questionformulation.html"><a href="questionformulation.html#divergentconvergentthinking"><i class="fa fa-check"></i><b>2.2.3</b> Thinking Divergently &amp; Convergently</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="questionformulation.html"><a href="questionformulation.html#conclusion"><i class="fa fa-check"></i><b>2.3</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataacquisition.html"><a href="dataacquisition.html"><i class="fa fa-check"></i><b>3</b> Data Acquisition</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataacquisition.html"><a href="dataacquisition.html#employee-surveys"><i class="fa fa-check"></i><b>3.1</b> Employee Surveys</a></li>
<li class="chapter" data-level="3.2" data-path="dataacquisition.html"><a href="dataacquisition.html#rating-forms"><i class="fa fa-check"></i><b>3.2</b> Rating Forms</a></li>
<li class="chapter" data-level="3.3" data-path="dataacquisition.html"><a href="dataacquisition.html#surveillance-monitoring"><i class="fa fa-check"></i><b>3.3</b> Surveillance &amp; Monitoring</a></li>
<li class="chapter" data-level="3.4" data-path="dataacquisition.html"><a href="dataacquisition.html#database-queries"><i class="fa fa-check"></i><b>3.4</b> Database Queries</a></li>
<li class="chapter" data-level="3.5" data-path="dataacquisition.html"><a href="dataacquisition.html#scraping"><i class="fa fa-check"></i><b>3.5</b> Scraping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datamanagement.html"><a href="datamanagement.html"><i class="fa fa-check"></i><b>4</b> Data Management</a>
<ul>
<li class="chapter" data-level="4.1" data-path="datamanagement.html"><a href="datamanagement.html#datamanage_clean"><i class="fa fa-check"></i><b>4.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="4.2" data-path="datamanagement.html"><a href="datamanagement.html#datamanage_manipulate"><i class="fa fa-check"></i><b>4.2</b> Data Manipulation &amp; Structuring</a></li>
<li class="chapter" data-level="4.3" data-path="datamanagement.html"><a href="datamanagement.html#datamanage_tools"><i class="fa fa-check"></i><b>4.3</b> Common Data-Management Tools</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataanalysis.html"><a href="dataanalysis.html"><i class="fa fa-check"></i><b>5</b> Data Analysis</a></li>
<li class="chapter" data-level="6" data-path="datainterpretationstorytelling.html"><a href="datainterpretationstorytelling.html"><i class="fa fa-check"></i><b>6</b> Data Interpretation &amp; Storytelling</a></li>
<li class="chapter" data-level="7" data-path="deploymentimplementation.html"><a href="deploymentimplementation.html"><i class="fa fa-check"></i><b>7</b> Deployment &amp; Implementation</a></li>
<li class="part"><span><b>II Introduction to R</b></span></li>
<li class="chapter" data-level="8" data-path="overviewR.html"><a href="overviewR.html"><i class="fa fa-check"></i><b>8</b> Overview of R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="8.1" data-path="overviewR.html"><a href="overviewR.html#R_overview"><i class="fa fa-check"></i><b>8.1</b> R Programming Language</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="overviewR.html"><a href="overviewR.html#R_what"><i class="fa fa-check"></i><b>8.1.1</b> What Is R?</a></li>
<li class="chapter" data-level="8.1.2" data-path="overviewR.html"><a href="overviewR.html#R_why"><i class="fa fa-check"></i><b>8.1.2</b> Why Use R?</a></li>
<li class="chapter" data-level="8.1.3" data-path="overviewR.html"><a href="overviewR.html#R_who"><i class="fa fa-check"></i><b>8.1.3</b> Who Uses R?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="overviewR.html"><a href="overviewR.html#RStudio_overview"><i class="fa fa-check"></i><b>8.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="overviewR.html"><a href="overviewR.html#RStudio_what"><i class="fa fa-check"></i><b>8.2.1</b> What is RStudio?</a></li>
<li class="chapter" data-level="8.2.2" data-path="overviewR.html"><a href="overviewR.html#RStudio_why"><i class="fa fa-check"></i><b>8.2.2</b> Why RStudio?</a></li>
<li class="chapter" data-level="8.2.3" data-path="overviewR.html"><a href="overviewR.html#RStudio_who"><i class="fa fa-check"></i><b>8.2.3</b> Who Uses RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="overviewR.html"><a href="overviewR.html#packages_overview"><i class="fa fa-check"></i><b>8.3</b> Packages</a></li>
<li class="chapter" data-level="8.4" data-path="overviewR.html"><a href="overviewR.html#summary"><i class="fa fa-check"></i><b>8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>9</b> Installing R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="9.1" data-path="install.html"><a href="install.html#installR"><i class="fa fa-check"></i><b>9.1</b> Downloading &amp; Installing R</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="install.html"><a href="install.html#for-windows-operation-systems"><i class="fa fa-check"></i><b>9.1.1</b> For Windows Operation Systems</a></li>
<li class="chapter" data-level="9.1.2" data-path="install.html"><a href="install.html#for-mac-operating-systems"><i class="fa fa-check"></i><b>9.1.2</b> For Mac Operating Systems</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="install.html"><a href="install.html#installRStudio"><i class="fa fa-check"></i><b>9.2</b> Downloading &amp; Installing RStudio</a></li>
<li class="chapter" data-level="9.3" data-path="install.html"><a href="install.html#summary-1"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="gettingstarted.html"><a href="gettingstarted.html"><i class="fa fa-check"></i><b>10</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="gettingstarted.html"><a href="gettingstarted.html#orientation-to-rstudio"><i class="fa fa-check"></i><b>10.1</b> Orientation to RStudio</a></li>
<li class="chapter" data-level="10.2" data-path="gettingstarted.html"><a href="gettingstarted.html#createRscript"><i class="fa fa-check"></i><b>10.2</b> Creating &amp; Saving an R Script</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="gettingstarted.html"><a href="gettingstarted.html#creating-a-new-r-script"><i class="fa fa-check"></i><b>10.2.1</b> Creating a New R Script</a></li>
<li class="chapter" data-level="10.2.2" data-path="gettingstarted.html"><a href="gettingstarted.html#using-an-r-script"><i class="fa fa-check"></i><b>10.2.2</b> Using an R Script</a></li>
<li class="chapter" data-level="10.2.3" data-path="gettingstarted.html"><a href="gettingstarted.html#saving-an-r-script"><i class="fa fa-check"></i><b>10.2.3</b> Saving an R Script</a></li>
<li class="chapter" data-level="10.2.4" data-path="gettingstarted.html"><a href="gettingstarted.html#opening-a-saved-r-script"><i class="fa fa-check"></i><b>10.2.4</b> Opening a Saved R Script</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="gettingstarted.html"><a href="gettingstarted.html#creating-an-rstudio-project"><i class="fa fa-check"></i><b>10.3</b> Creating an RStudio Project</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="gettingstarted.html"><a href="gettingstarted.html#creating-a-new-rstudio-project"><i class="fa fa-check"></i><b>10.3.1</b> Creating a New RStudio Project</a></li>
<li class="chapter" data-level="10.3.2" data-path="gettingstarted.html"><a href="gettingstarted.html#opening-an-existing-rstudio-project"><i class="fa fa-check"></i><b>10.3.2</b> Opening an Existing RStudio Project</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="gettingstarted.html"><a href="gettingstarted.html#orientation-to-written-tutorials"><i class="fa fa-check"></i><b>10.4</b> Orientation to Written Tutorials</a></li>
<li class="chapter" data-level="10.5" data-path="gettingstarted.html"><a href="gettingstarted.html#summary-2"><i class="fa fa-check"></i><b>10.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="gentleintro.html"><a href="gentleintro.html"><i class="fa fa-check"></i><b>11</b> Basic Features and Operations of the R Language</a>
<ul>
<li class="chapter" data-level="11.1" data-path="gentleintro.html"><a href="gentleintro.html#r-as-a-calculator"><i class="fa fa-check"></i><b>11.1</b> R as a Calculator</a></li>
<li class="chapter" data-level="11.2" data-path="gentleintro.html"><a href="gentleintro.html#functions"><i class="fa fa-check"></i><b>11.2</b> Functions</a></li>
<li class="chapter" data-level="11.3" data-path="gentleintro.html"><a href="gentleintro.html#packages"><i class="fa fa-check"></i><b>11.3</b> Packages</a></li>
<li class="chapter" data-level="11.4" data-path="gentleintro.html"><a href="gentleintro.html#variable-assignment"><i class="fa fa-check"></i><b>11.4</b> Variable Assignment</a></li>
<li class="chapter" data-level="11.5" data-path="gentleintro.html"><a href="gentleintro.html#types-of-data"><i class="fa fa-check"></i><b>11.5</b> Types of Data</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="gentleintro.html"><a href="gentleintro.html#numeric-data"><i class="fa fa-check"></i><b>11.5.1</b> <code>numeric</code> Data</a></li>
<li class="chapter" data-level="11.5.2" data-path="gentleintro.html"><a href="gentleintro.html#character-data"><i class="fa fa-check"></i><b>11.5.2</b> <code>character</code> Data</a></li>
<li class="chapter" data-level="11.5.3" data-path="gentleintro.html"><a href="gentleintro.html#date-data"><i class="fa fa-check"></i><b>11.5.3</b> <code>Date</code> Data</a></li>
<li class="chapter" data-level="11.5.4" data-path="gentleintro.html"><a href="gentleintro.html#logical-data"><i class="fa fa-check"></i><b>11.5.4</b> <code>logical</code> Data</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="gentleintro.html"><a href="gentleintro.html#vectors"><i class="fa fa-check"></i><b>11.6</b> Vectors</a></li>
<li class="chapter" data-level="11.7" data-path="gentleintro.html"><a href="gentleintro.html#lists"><i class="fa fa-check"></i><b>11.7</b> Lists</a></li>
<li class="chapter" data-level="11.8" data-path="gentleintro.html"><a href="gentleintro.html#data-frames"><i class="fa fa-check"></i><b>11.8</b> Data Frames</a></li>
<li class="chapter" data-level="11.9" data-path="gentleintro.html"><a href="gentleintro.html#annotate"><i class="fa fa-check"></i><b>11.9</b> Annotations</a></li>
<li class="chapter" data-level="11.10" data-path="gentleintro.html"><a href="gentleintro.html#summary-3"><i class="fa fa-check"></i><b>11.10</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="setwd.html"><a href="setwd.html"><i class="fa fa-check"></i><b>12</b> Setting a Working Directory</a>
<ul>
<li class="chapter" data-level="12.0.1" data-path="setwd.html"><a href="setwd.html#identify-the-current-working-directory"><i class="fa fa-check"></i><b>12.0.1</b> Identify the Current Working Directory</a></li>
<li class="chapter" data-level="12.0.2" data-path="setwd.html"><a href="setwd.html#set-a-new-working-directory"><i class="fa fa-check"></i><b>12.0.2</b> Set a New Working Directory</a></li>
<li class="chapter" data-level="12.1" data-path="setwd.html"><a href="setwd.html#summary-4"><i class="fa fa-check"></i><b>12.1</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>III Data Acquisition &amp; Management</b></span></li>
<li class="chapter" data-level="13" data-path="read.html"><a href="read.html"><i class="fa fa-check"></i><b>13</b> Reading Data into R</a>
<ul>
<li class="chapter" data-level="13.1" data-path="read.html"><a href="read.html#readcsv"><i class="fa fa-check"></i><b>13.1</b> Read a .csv File</a></li>
<li class="chapter" data-level="13.2" data-path="read.html"><a href="read.html#readxlsx"><i class="fa fa-check"></i><b>13.2</b> Read a .xlsx File</a></li>
<li class="chapter" data-level="13.3" data-path="read.html"><a href="read.html#read_summary"><i class="fa fa-check"></i><b>13.3</b> Summary</a></li>
<li class="chapter" data-level="13.4" data-path="read.html"><a href="read.html#read_supplement"><i class="fa fa-check"></i><b>13.4</b> Chapter Supplement</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="read.html"><a href="read.html#read_additionalfunctions"><i class="fa fa-check"></i><b>13.4.1</b> Additional Functions to Read a .csv File</a></li>
<li class="chapter" data-level="13.4.2" data-path="read.html"><a href="read.html#read_skiprows"><i class="fa fa-check"></i><b>13.4.2</b> Skip Rows of Data During Read</a></li>
<li class="chapter" data-level="13.4.3" data-path="read.html"><a href="read.html#listdatafiles"><i class="fa fa-check"></i><b>13.4.3</b> List Data File Names in Working Directory</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="addnames.html"><a href="addnames.html"><i class="fa fa-check"></i><b>14</b> Removing and Adding Variable Names</a>
<ul>
<li class="chapter" data-level="14.1" data-path="addnames.html"><a href="addnames.html#remove-variable-names-from-a-data-frame-object"><i class="fa fa-check"></i><b>14.1</b> Remove Variable Names from a Data Frame Object</a></li>
<li class="chapter" data-level="14.2" data-path="addnames.html"><a href="addnames.html#add-variable-names-to-a-data-frame-object"><i class="fa fa-check"></i><b>14.2</b> Add Variable Names to a Data Frame Object</a></li>
<li class="chapter" data-level="14.3" data-path="addnames.html"><a href="addnames.html#summary-5"><i class="fa fa-check"></i><b>14.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="write.html"><a href="write.html"><i class="fa fa-check"></i><b>15</b> Writing Data from R</a>
<ul>
<li class="chapter" data-level="15.1" data-path="write.html"><a href="write.html#write-data-frame-to-working-directory"><i class="fa fa-check"></i><b>15.1</b> Write Data Frame to Working Directory</a></li>
<li class="chapter" data-level="15.2" data-path="write.html"><a href="write.html#write-table-to-working-directory"><i class="fa fa-check"></i><b>15.2</b> Write Table to Working Directory</a></li>
<li class="chapter" data-level="15.3" data-path="write.html"><a href="write.html#summary-6"><i class="fa fa-check"></i><b>15.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="arrange.html"><a href="arrange.html"><i class="fa fa-check"></i><b>16</b> Arranging (Sorting) Data</a>
<ul>
<li class="chapter" data-level="16.1" data-path="arrange.html"><a href="arrange.html#arrangebyvalues"><i class="fa fa-check"></i><b>16.1</b> Arrange (Sort) Data</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="arrange.html"><a href="arrange.html#opt1_arrange_withpipe"><i class="fa fa-check"></i><b>16.1.1</b> <em>With</em> Pipe</a></li>
<li class="chapter" data-level="16.1.2" data-path="arrange.html"><a href="arrange.html#opt1_arrange_withoutpipe"><i class="fa fa-check"></i><b>16.1.2</b> <em>Without</em> Pipe</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="arrange.html"><a href="arrange.html#summary-7"><i class="fa fa-check"></i><b>16.2</b> Summary</a></li>
<li class="chapter" data-level="16.3" data-path="arrange.html"><a href="arrange.html#arrange_supplement"><i class="fa fa-check"></i><b>16.3</b> Chapter Supplement</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="arrange.html"><a href="arrange.html#arrange_orderfunction"><i class="fa fa-check"></i><b>16.3.1</b> <code>order</code> Function from Base R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="join.html"><a href="join.html"><i class="fa fa-check"></i><b>17</b> Joining (Merging) Data</a>
<ul>
<li class="chapter" data-level="17.1" data-path="join.html"><a href="join.html#horizontaljoin"><i class="fa fa-check"></i><b>17.1</b> Horizontal Join (Merge)</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="join.html"><a href="join.html#opt2_join_withpipe"><i class="fa fa-check"></i><b>17.1.1</b> <em>With</em> Pipe</a></li>
<li class="chapter" data-level="17.1.2" data-path="join.html"><a href="join.html#opt2_join_withoutpipe"><i class="fa fa-check"></i><b>17.1.2</b> <em>Without</em> Pipe</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="join.html"><a href="join.html#verticaljoin"><i class="fa fa-check"></i><b>17.2</b> Vertical Join (Merge)</a></li>
<li class="chapter" data-level="17.3" data-path="join.html"><a href="join.html#summary-8"><i class="fa fa-check"></i><b>17.3</b> Summary</a></li>
<li class="chapter" data-level="17.4" data-path="join.html"><a href="join.html#join_supplement"><i class="fa fa-check"></i><b>17.4</b> Chapter Supplement</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="join.html"><a href="join.html#join_mergefunction"><i class="fa fa-check"></i><b>17.4.1</b> <code>merge</code> Function from Base R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>18</b> Filtering Data</a>
<ul>
<li class="chapter" data-level="18.1" data-path="filter.html"><a href="filter.html#filter_cases"><i class="fa fa-check"></i><b>18.1</b> Filter Cases from Data Frame</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="filter.html"><a href="filter.html#with-pipes"><i class="fa fa-check"></i><b>18.1.1</b> <em>With</em> Pipes</a></li>
<li class="chapter" data-level="18.1.2" data-path="filter.html"><a href="filter.html#without-pipes"><i class="fa fa-check"></i><b>18.1.2</b> <em>Without</em> Pipes</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="filter.html"><a href="filter.html#remove-single-variable-from-data-frame"><i class="fa fa-check"></i><b>18.2</b> Remove Single Variable from Data Frame</a></li>
<li class="chapter" data-level="18.3" data-path="filter.html"><a href="filter.html#select_multiplevariables"><i class="fa fa-check"></i><b>18.3</b> Select Multiple Variables from Data Frame</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="filter.html"><a href="filter.html#with-pipe"><i class="fa fa-check"></i><b>18.3.1</b> <em>With</em> Pipe</a></li>
<li class="chapter" data-level="18.3.2" data-path="filter.html"><a href="filter.html#without-pipe"><i class="fa fa-check"></i><b>18.3.2</b> <em>Without</em> Pipe</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="filter.html"><a href="filter.html#remove_multiplevariables"><i class="fa fa-check"></i><b>18.4</b> Remove Multiple Variables from Data Frame</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="filter.html"><a href="filter.html#with-pipe-1"><i class="fa fa-check"></i><b>18.4.1</b> <em>With</em> Pipe</a></li>
<li class="chapter" data-level="18.4.2" data-path="filter.html"><a href="filter.html#without-pipe-1"><i class="fa fa-check"></i><b>18.4.2</b> <em>Without</em> Pipe</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="filter.html"><a href="filter.html#summary-9"><i class="fa fa-check"></i><b>18.5</b> Summary</a></li>
<li class="chapter" data-level="18.6" data-path="filter.html"><a href="filter.html#filter_supplement"><i class="fa fa-check"></i><b>18.6</b> Chapter Supplement</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="filter.html"><a href="filter.html#filter_subset_supplement"><i class="fa fa-check"></i><b>18.6.1</b> <code>subset</code> Function from Base R</a></li>
<li class="chapter" data-level="18.6.2" data-path="filter.html"><a href="filter.html#str_detect_supp"><i class="fa fa-check"></i><b>18.6.2</b> Filter by Pattern Contained within String</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>19</b> Cleaning Data</a>
<ul>
<li class="chapter" data-level="19.1" data-path="clean.html"><a href="clean.html#review-data"><i class="fa fa-check"></i><b>19.1</b> Review Data</a></li>
<li class="chapter" data-level="19.2" data-path="clean.html"><a href="clean.html#clean-data"><i class="fa fa-check"></i><b>19.2</b> Clean Data</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="clean.html"><a href="clean.html#replace-a-specific-value-for-a-specific-case"><i class="fa fa-check"></i><b>19.2.1</b> Replace a Specific Value for a Specific Case</a></li>
<li class="chapter" data-level="19.2.2" data-path="clean.html"><a href="clean.html#replace-a-specific-value-for-all-cases-with-a-particular-value"><i class="fa fa-check"></i><b>19.2.2</b> Replace a Specific Value for All Cases with a Particular Value</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="clean.html"><a href="clean.html#rename-variables"><i class="fa fa-check"></i><b>19.3</b> Rename Variables</a></li>
<li class="chapter" data-level="19.4" data-path="clean.html"><a href="clean.html#other-approaches-to-cleaning-data"><i class="fa fa-check"></i><b>19.4</b> Other Approaches to Cleaning Data</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="clean.html"><a href="clean.html#changing-the-case-of-variable-names"><i class="fa fa-check"></i><b>19.4.1</b> Changing the Case of Variable Names</a></li>
<li class="chapter" data-level="19.4.2" data-path="clean.html"><a href="clean.html#changing-the-case-of-character-variable-values"><i class="fa fa-check"></i><b>19.4.2</b> Changing the Case of Character Variable Values</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="clean.html"><a href="clean.html#summary-10"><i class="fa fa-check"></i><b>19.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="aggregatesegment.html"><a href="aggregatesegment.html"><i class="fa fa-check"></i><b>20</b> Aggregating &amp; Segmenting Data</a>
<ul>
<li class="chapter" data-level="20.1" data-path="aggregatesegment.html"><a href="aggregatesegment.html#counts_bygroup"><i class="fa fa-check"></i><b>20.1</b> Counts By Group</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="aggregatesegment.html"><a href="aggregatesegment.html#counts_bygroup_pipes"><i class="fa fa-check"></i><b>20.1.1</b> <em>With</em> Pipes</a></li>
<li class="chapter" data-level="20.1.2" data-path="aggregatesegment.html"><a href="aggregatesegment.html#counts_bygroup_nopipes"><i class="fa fa-check"></i><b>20.1.2</b> <em>Without</em> Pipes</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="aggregatesegment.html"><a href="aggregatesegment.html#centraldispersion_bygroup"><i class="fa fa-check"></i><b>20.2</b> Measures of Central Tendency and Dispersion By Group</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="aggregatesegment.html"><a href="aggregatesegment.html#centraldispersion_bygroup_pipes"><i class="fa fa-check"></i><b>20.2.1</b> <em>With</em> Pipes</a></li>
<li class="chapter" data-level="20.2.2" data-path="aggregatesegment.html"><a href="aggregatesegment.html#centraldispersion_bygroup_nopipes"><i class="fa fa-check"></i><b>20.2.2</b> <em>Without</em> Pipes</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="aggregatesegment.html"><a href="aggregatesegment.html#addaggregatedvariable"><i class="fa fa-check"></i><b>20.3</b> Add Variable to Data Frame Containing Aggregated Values</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="aggregatesegment.html"><a href="aggregatesegment.html#addaggregatedvariable_pipes"><i class="fa fa-check"></i><b>20.3.1</b> <em>With</em> Pipes</a></li>
<li class="chapter" data-level="20.3.2" data-path="aggregatesegment.html"><a href="aggregatesegment.html#addaggregatedvariable_nopipes"><i class="fa fa-check"></i><b>20.3.2</b> <em>Without</em> Pipes</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="aggregatesegment.html"><a href="aggregatesegment.html#visualize_bygroup"><i class="fa fa-check"></i><b>20.4</b> Visualize Data By Group</a></li>
<li class="chapter" data-level="20.5" data-path="aggregatesegment.html"><a href="aggregatesegment.html#summary-11"><i class="fa fa-check"></i><b>20.5</b> Summary</a></li>
<li class="chapter" data-level="20.6" data-path="aggregatesegment.html"><a href="aggregatesegment.html#aggregatesegment_supplement"><i class="fa fa-check"></i><b>20.6</b> Chapter Supplement</a>
<ul>
<li class="chapter" data-level="20.6.1" data-path="aggregatesegment.html"><a href="aggregatesegment.html#aggregatesegment_subset_supplement"><i class="fa fa-check"></i><b>20.6.1</b> <code>describeBy</code> Function from <code>psych</code> Package</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Odds &amp; Ends</b></span></li>
<li class="chapter" data-level="" data-path="create-portfolio.html"><a href="create-portfolio.html"><i class="fa fa-check"></i>Creating a Data Analytics Portfolio</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for HR:<br />
<em>An Introduction to Human Resource Analytics Using R</em><br />
BOOK UNDER CONSTRUCTION</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="filter" class="section level1" number="18">
<h1><span class="header-section-number">Chapter 18</span> Filtering Data</h1>
<p><strong>Filtering</strong> data (i.e., <strong>subsetting</strong> data) is an important data-management process, as it allows us to (a) select or remove a <em>subset of cases</em> from a data frame based on their scores on one or more variables, or to (b) select or remove a <em>subset of variables</em> from a data frame.</p>
<div id="conceptual-review-of-logical-operators" class="section level4" number="18.0.0.1">
<h4><span class="header-section-number">18.0.0.1</span> Conceptual Review of Logical Operators</h4>
<p>When our goal is to select or remove a subset of cases (i.e., observations) from a data frame, we typically do so by applying logical operators. You may already be comfortable with the use of logical operators and expressions like “greater than” (<span class="math inline">\(&gt;\)</span>), “less than” (<span class="math inline">\(&lt;\)</span>), “equal to” (<span class="math inline">\(=\)</span>), “greater than or equal to” (<span class="math inline">\(\ge\)</span>), and “less than or equal to” (<span class="math inline">\(\le\)</span>), but you may be less comfortable with the use of the logical “OR” and the logical “AND.” Thus, before we start working with data, let’s do a quick review.</p>
<p>When we wish to apply a single logical statement, our job is relatively straightforward. To keep things simple, let’s focus on a single vector, and we’ll call that vector <span class="math inline">\(X\)</span>. For example, we might choose to select only those cases with scores on <span class="math inline">\(X\)</span> that are “greater than or equal to” (<span class="math inline">\(\ge\)</span> or <span class="math inline">\(&gt;\)</span><span class="math inline">\(=\)</span>) 3, thereby retaining scores that are equal to or greater than 3, as highlighted in blue below. In other words, we select only those cases for which their score on <span class="math inline">\(X\)</span> would be true given the logical statement <span class="math inline">\(X \ge 3\)</span>.</p>
<div class="figure">
<img src="logical_greaterthanequalto.png" alt="" />
<p class="caption">The vector <span class="math inline">\(X\)</span> has seven possible scores, ranging from 1 to 7. If we apply the logical statement that <span class="math inline">\(X\)</span> is “greater than or equal to” (<span class="math inline">\(\ge\)</span>) 3, we select only those cases with scores that are equal to or greater than 3 and up to the maximum possible score of 7.</p>
</div>
<p>As another example, we might choose to select only those cases with scores on <span class="math inline">\(X\)</span> that are “less than or equal to” (<span class="math inline">\(\le\)</span> or <span class="math inline">\(&lt;\)</span><span class="math inline">\(=\)</span>) 5, thereby retaining scores that are equal to or less than 5, as highlighted in red below. In other words, we select only those cases for which their score on <span class="math inline">\(X\)</span> would be true given the logical statement <span class="math inline">\(X \le 5\)</span>.</p>
<div class="figure">
<img src="logical_lessthanequalto.png" alt="" />
<p class="caption">The vector <span class="math inline">\(X\)</span> has seven possible scores, ranging from 1 to 7. If we apply the logical statement that <span class="math inline">\(X\)</span> is “greater than or equal to” (<span class="math inline">\(\ge\)</span>) 3, we select only those cases with scores that are equal to or greater than 3 and down to the minimum possible score of 1.</p>
</div>
<p>If we apply the logical “OR” operator, things get a bit more interesting. The logical “OR” is used when our objective is to select cases based on two logical statements, and if <em>either</em> logical statement is true for a given case, then that case is selected. The logical “OR” is consistent with idea of a mathematical union (<span class="math inline">\(\cup\)</span>) from Set Theory. As an example, let’s combine the two logical statements from above with the logical “OR” operator. We retain those cases for which their score on <span class="math inline">\(X\)</span> is “greater than or equal to” 3 <strong>or</strong> “less than or equal to” 5. Given that <span class="math inline">\(X\)</span> has possible scores ranging from 1-7, below, we see that this logic retains all cases, as all scores (1-7) would satisfy one or both of the logical statements.</p>
<div class="figure">
<img src="logical_or.png" alt="" />
<p class="caption">The vector <span class="math inline">\(X\)</span> has seven possible scores, ranging from 1 to 7. If we wish to retain those cases for which <span class="math inline">\(X\)</span> is “greater than or equal to” 3 <strong>or</strong> “less than or equal to” 5, we select those cases that satisfy either (or both) logical statements.</p>
</div>
<p>Using the same to logical statements above, let’s replace the logical “OR” with the logical “AND.” The logical “AND” is used when our objective is to select cases based on two logical statements, and if <em>both</em> logical statements are true for a given case, then that case is selected. The logical “AND” is consistent with idea of a mathematical intersection (<span class="math inline">\(\cap\)</span>) from Set Theory. In this example, we retain only those cases for which their score on <span class="math inline">\(X\)</span> is “greater than or equal to” 3 <strong>and</strong> “less than or equal to” 5. Given that <span class="math inline">\(X\)</span> has possible scores ranging from 1-7, below, we see that this logic retain only cases with scores within the range 3-5, as only scores of 3, 4, or 5 would satisfy both of the logical statements.</p>
<div class="figure">
<img src="logical_and.png" alt="" />
<p class="caption">The vector <span class="math inline">\(X\)</span> has seven possible scores, ranging from 1 to 7. If we wish to retain those cases for which <span class="math inline">\(X\)</span> is “greater than or equal to” 3 <strong>and</strong> “less than or equal to” 5, we select only those cases that satisfy both logical statements.</p>
</div>
</div>
<div id="video-tutorial-11" class="section level4" number="18.0.0.2">
<h4><span class="header-section-number">18.0.0.2</span> Video Tutorial</h4>
<p>As usual, you have the choice to follow along with the written tutorial in this chapter or to watch the video tutorial below. Both versions of the tutorial will show you how to filter (subset) data with or without the pipe (<code>%&gt;%</code>) operator. If you’re unfamiliar with the pipe operator, no need to worry: I provide a brief explanation and demonstration regarding their purpose in both versions of the tutorial.</p>
<iframe src="https://youtube.com/embed/izVcbPmu0D0?rel=0" width="672" height="400px">
</iframe>
<p>Link to Video Tutorial: <a href="https://youtu.be/izVcbPmu0D0" class="uri">https://youtu.be/izVcbPmu0D0</a></p>
</div>
<div id="functions-packages-introduced-6" class="section level4" number="18.0.0.3">
<h4><span class="header-section-number">18.0.0.3</span> Functions &amp; Packages Introduced</h4>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str</code></td>
<td>base <code>R</code></td>
</tr>
<tr class="even">
<td><code>filter</code></td>
<td><code>dplyr</code></td>
</tr>
<tr class="odd">
<td><code>c</code></td>
<td>base <code>R</code></td>
</tr>
<tr class="even">
<td><code>as.Date</code></td>
<td>base <code>R</code></td>
</tr>
<tr class="odd">
<td><code>select</code></td>
<td><code>dplyr</code></td>
</tr>
<tr class="even">
<td><code>subset</code></td>
<td>base <code>R</code></td>
</tr>
</tbody>
</table>
</div>
<div id="initsteps_filter" class="section level4" number="18.0.0.4">
<h4><span class="header-section-number">18.0.0.4</span> Initial Steps</h4>
<p>If you haven’t already, save the files called <strong>“PersData.csv”</strong> and <strong>“PerfData.csv”</strong> into a folder that you will subsequently set as your working directory. Your working directory will likely be different than the one shown below (i.e., <code>"H:/RWorkshop"</code>). As a reminder, you can access all of the data files referenced in this book by downloading them as a compressed (zipped) folder from the my GitHub site: <a href="https://github.com/davidcaughlin/R-Tutorial-Data-Files" class="uri">https://github.com/davidcaughlin/R-Tutorial-Data-Files</a>; once you’ve followed the link to GitHub, just click “Code” (or “Download”) followed by “Download ZIP,” which will download all of the data files referenced in this book. For the sake of parsimony, I recommend downloading all of the data files into the same folder on your computer, which will allow you to set that same folder as your working directory for each of the chapters in this book.</p>
<p>Next, using the <code>setwd</code> function, set your working directory to the folder in which you saved the data file for this chapter. Alternatively, you can manually set your working directory folder in your drop-down menus by going to <em>Session &gt; Set Working Directory &gt; Choose Directory…</em>. Be sure to create a new R script file (.R) or update an existing R script file so that you can save your script and annotations. If you need refreshers on how to set your working directory and how to create and save an R script, please refer to <a href="setwd.html#setwd">Setting a Working Directory</a> and <a href="gettingstarted.html#createRscript">Creating &amp; Saving an R Script</a>.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="filter.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your working directory</span></span>
<span id="cb362-2"><a href="filter.html#cb362-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;H:/RWorkshop&quot;</span>)</span></code></pre></div>
<p>Next, read in the .csv data files called <strong>“PersData.csv”</strong> and <strong>“PerfData.csv”</strong> using your choice of read function. In this example, I use the <code>read_csv</code> function from the <code>readr</code> package <span class="citation">(<a href="references.html#ref-R-readr" role="doc-biblioref">Wickham and Hester 2020b</a>)</span>. If you choose to use the <code>read_csv</code> function, be sure that you have installed and accessed the <code>readr</code> package using the <code>install.packages</code> and <code>library</code> functions. <em>Note: You don’t need to install a package every time you wish to access it; in general, I would recommend updating a package installation once ever 1-3 months.</em> For refreshers on installing packages and reading data into R, please refer to <a href="gentleintro.html#packages">Packages</a> and <a href="read.html#read">Reading Data into R</a>.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="filter.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install readr package if you haven&#39;t already</span></span>
<span id="cb363-2"><a href="filter.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [Note: You don&#39;t need to install a package every </span></span>
<span id="cb363-3"><a href="filter.html#cb363-3" aria-hidden="true" tabindex="-1"></a><span class="co"># time you wish to access it]</span></span>
<span id="cb363-4"><a href="filter.html#cb363-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="filter.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access readr package</span></span>
<span id="cb364-2"><a href="filter.html#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb364-3"><a href="filter.html#cb364-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-4"><a href="filter.html#cb364-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data and name data frame (tibble) objects</span></span>
<span id="cb364-5"><a href="filter.html#cb364-5" aria-hidden="true" tabindex="-1"></a>personaldata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;PersData.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   id = col_double(),
##   lastname = col_character(),
##   firstname = col_character(),
##   startdate = col_character(),
##   gender = col_character()
## )</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="filter.html#cb366-1" aria-hidden="true" tabindex="-1"></a>performancedata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;PerfData.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   id = col_double(),
##   perf_q1 = col_double(),
##   perf_q2 = col_double(),
##   perf_q3 = col_double(),
##   perf_q4 = col_double()
## )</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="filter.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the names of the variables in the data frame (tibble) objects</span></span>
<span id="cb368-2"><a href="filter.html#cb368-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(personaldata)</span></code></pre></div>
<pre><code>## [1] &quot;id&quot;        &quot;lastname&quot;  &quot;firstname&quot; &quot;startdate&quot; &quot;gender&quot;</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="filter.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(performancedata)</span></code></pre></div>
<pre><code>## [1] &quot;id&quot;      &quot;perf_q1&quot; &quot;perf_q2&quot; &quot;perf_q3&quot; &quot;perf_q4&quot;</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="filter.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame (tibble) objects</span></span>
<span id="cb372-2"><a href="filter.html#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(personaldata)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 5
##      id lastname   firstname startdate gender
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt; 
## 1   153 Sanchez    Alejandro 1/1/2016  male  
## 2   154 McDonald   Ronald    1/9/2016  male  
## 3   155 Smith      John      1/9/2016  male  
## 4   165 Doe        Jane      1/4/2016  female
## 5   125 Franklin   Benjamin  1/5/2016  male  
## 6   111 Newton     Isaac     1/9/2016  male  
## 7   198 Morales    Linda     1/7/2016  female
## 8   201 Providence Cindy     1/9/2016  female
## 9   282 Legend     John      1/9/2016  male</code></pre>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="filter.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(performancedata)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##      id perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153     3.9     4.8     4.9     5  
## 2   125     2.1     1.9     2.1     2.3
## 3   111     3.3     3.3     3.4     3.3
## 4   198     4.9     4.5     4.4     4.8
## 5   201     1.2     1.1     1       1  
## 6   282     2.2     2.3     2.4     2.5</code></pre>
<p>As you can see from the output generated in your console, on the one hand, the <code>personaldata</code> data frame object contains basic employee demographic information. The variable names include: <code>id</code>, <code>lastname</code>, <code>firstname</code>, <code>startdate</code>, and <code>gender</code>. On the other hand, the <code>personaldata</code> data frame object contains the same <code>id</code> unique identifier variable as the <code>personaldata</code> data frame object, but instead of employee demographic information, this data frame object includes variables associated with quarterly employee performance: <code>perf_q1</code>, <code>perf_q2</code>, <code>perf_q3</code>, and <code>perf_q4</code>.</p>
<p>To make this chapter more interesting (and for the sake of practice), let’s use the <code>full_join</code> function from <code>dplyr</code> to join (merge) the two data frames we just read in (<code>personaldata</code>, <code>performancedata</code>) using the <code>id</code> variable as the key variable. Let’s arbitrarily name the new joined (merged) data frame <code>mergeddf</code> using the <code>&lt;-</code> operator. For more information on joining data, check out the chapter called <a href="join.html#join">Joining (Merging) Data</a>.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="filter.html#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install readr package if you haven&#39;t already</span></span>
<span id="cb376-2"><a href="filter.html#cb376-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [Note: You don&#39;t need to install a package every </span></span>
<span id="cb376-3"><a href="filter.html#cb376-3" aria-hidden="true" tabindex="-1"></a><span class="co"># time you wish to access it]</span></span>
<span id="cb376-4"><a href="filter.html#cb376-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="filter.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access package</span></span>
<span id="cb377-2"><a href="filter.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="filter.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full join (without pipe)</span></span>
<span id="cb378-2"><a href="filter.html#cb378-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(personaldata, performancedata, <span class="at">by=</span><span class="st">&quot;id&quot;</span>)</span>
<span id="cb378-3"><a href="filter.html#cb378-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb378-4"><a href="filter.html#cb378-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print joined (merged) data frame object</span></span>
<span id="cb378-5"><a href="filter.html#cb378-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mergeddf)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez    Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald   Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith      John      1/9/2016  male      NA      NA      NA      NA  
## 4   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 5   125 Franklin   Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 6   111 Newton     Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 7   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 8   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 9   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Now we have a joined data frame called <code>mergeddf</code>!</p>
</div>
<div id="filter_cases" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> Filter Cases from Data Frame</h2>
<p>Sometimes we want to select only a subset of cases from a data frame or table. There are different functions that can achieve this end. For example, the <code>subset</code> function filter from base <code>R</code> will do the trick. With that said, the <code>dplyr</code> package offers the <code>filter</code> function which has some advantages (e.g., faster with larger amounts of data), and thus, we will focus on the <code>filter</code> function in this chapter. If you would like to learn how to use the <code>subset</code> function from base R, check out the chapter supplement called <a href="filter.html#filter_supplement">Joining (Merging) Data</a>.</p>
<p>In order to properly filter data by cases, we need to know the respective types (classes) of the variables in the data frame. Perhaps the quickest way to find out the type (class) of each variable in the data frame is to use the <code>str</code> (structure) function from base <code>R</code>, and the function’s parentheses, just enter the name of the data frame (<code>mergeddf</code>).</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="filter.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine class of variables</span></span>
<span id="cb380-2"><a href="filter.html#cb380-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mergeddf)</span></code></pre></div>
<pre><code>## spec_tbl_df[,9] [9 x 9] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ id       : num [1:9] 153 154 155 165 125 111 198 201 282
##  $ lastname : chr [1:9] &quot;Sanchez&quot; &quot;McDonald&quot; &quot;Smith&quot; &quot;Doe&quot; ...
##  $ firstname: chr [1:9] &quot;Alejandro&quot; &quot;Ronald&quot; &quot;John&quot; &quot;Jane&quot; ...
##  $ startdate: chr [1:9] &quot;1/1/2016&quot; &quot;1/9/2016&quot; &quot;1/9/2016&quot; &quot;1/4/2016&quot; ...
##  $ gender   : chr [1:9] &quot;male&quot; &quot;male&quot; &quot;male&quot; &quot;female&quot; ...
##  $ perf_q1  : num [1:9] 3.9 NA NA NA 2.1 3.3 4.9 1.2 2.2
##  $ perf_q2  : num [1:9] 4.8 NA NA NA 1.9 3.3 4.5 1.1 2.3
##  $ perf_q3  : num [1:9] 4.9 NA NA NA 2.1 3.4 4.4 1 2.4
##  $ perf_q4  : num [1:9] 5 NA NA NA 2.3 3.3 4.8 1 2.5
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   id = col_double(),
##   ..   lastname = col_character(),
##   ..   firstname = col_character(),
##   ..   startdate = col_character(),
##   ..   gender = col_character()
##   .. )</code></pre>
<p>Note that the <code>id</code> variable is of type integer; the <code>lastname</code>, <code>firstname</code>, <code>startdate</code>, and <code>gender</code> variables are of type character (string); and the <code>perf_q4</code>, <code>perf_q4</code>, <code>perf_q4</code>, and <code>perf_q4</code> variables are of type numeric. The variable type will have important implications for how use use the <code>filter</code> function from <code>dplyr</code>.</p>
<p>In <code>R</code>, we can apply any one of the following logical operators when filtering our data:</p>
<table>
<thead>
<tr class="header">
<th>Logical Operator</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>“less than”</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>“greater than”</td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>“less than or equal to”</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>“greater than or equal to”</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>“equal to”</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>“not equal to”</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>“or”</td>
</tr>
<tr class="even">
<td><code>&amp;</code></td>
<td>“and”</td>
</tr>
<tr class="odd">
<td><code>!</code></td>
<td>“not”</td>
</tr>
</tbody>
</table>
<p>To get started, install and access the <code>dplyr</code> package.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="filter.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install package</span></span>
<span id="cb382-2"><a href="filter.html#cb382-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="filter.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access package</span></span>
<span id="cb383-2"><a href="filter.html#cb383-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>I will demonstrate two approaches for applying the <code>filter</code> function from <code>dplyr</code>. The first option uses “pipe(s),” which in R is represented by the <code>%&gt;%</code> operator. The pipe operator comes from a package called <code>magrittr</code>, on which the <code>dplyr</code> is partially dependent. In short, a pipe allows one to more efficiently code/script and to improve the readability of the code/script under certain conditions. Specifically, a <strong>pipe</strong> forwards the result or value of one object or expression to a subsequent function. In doing so, one can avoid writing functions in which other functions are nested parenthetically. The second option is more traditional and lacks the efficiency and readability of pipes. You can use either approach, and if don’t you want to use pipes, skip to the section below called <em>Without Pipes</em>. For more information on the pipe operator, check out this link: <a href="https://r4ds.had.co.nz/pipes.html" class="uri">https://r4ds.had.co.nz/pipes.html</a>.</p>
<div id="with-pipes" class="section level3" number="18.1.1">
<h3><span class="header-section-number">18.1.1</span> <em>With</em> Pipes</h3>
<p>Using an approach with pipes, first, use the <code>&lt;-</code> operator to name the filtered data frame that we will create. For this example, I name the new joined data frame <code>filterdf</code>; you could name it whatever you would like. Second, type the name of the first data frame, which we named <code>mergeddf</code> (see above), followed by the pipe (<code>%&gt;%</code>) operator. This will “pipe” our data frame into the subsequent function. Third, either on the same line or on the next line, type the <code>filter</code> function. Fourth, within the function parentheses, type the name of the variable we wish to filter the data frame by, which in this example is <code>gender</code>. Fourth, type a logical operator, which for this example is <code>==</code>. Fifth, type a value for the filter variable, which in this example is “female”; because the <code>gender</code> variable is of type <em>character</em>, we need to put quotation marks (<code>" "</code>) around the value of the variable that we wish to filter by. Remember, object names in R are case and space sensitive; for instance, <code>gender</code> is different from <code>Gender</code>, and “female” is different from “Female.”</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="filter.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in by gender with pipe</span></span>
<span id="cb384-2"><a href="filter.html#cb384-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(gender<span class="sc">==</span><span class="st">&quot;female&quot;</span>)</span>
<span id="cb384-3"><a href="filter.html#cb384-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-4"><a href="filter.html#cb384-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb384-5"><a href="filter.html#cb384-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 3 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 2   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 3   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1</code></pre>
<p>Note how the data frame above contains only those cases with “female” as their <code>gender</code> variable designation. The filter worked as expected.</p>
<p>Alternatively, we could filter <em>out</em> those cases in which <code>gender</code> is equal to “female” using the <code>!=</code> (not equal to) logical operator.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="filter.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out by gender with pipe</span></span>
<span id="cb386-2"><a href="filter.html#cb386-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(gender<span class="sc">!=</span><span class="st">&quot;female&quot;</span>)</span>
<span id="cb386-3"><a href="filter.html#cb386-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb386-4"><a href="filter.html#cb386-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb386-5"><a href="filter.html#cb386-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 4   125 Franklin Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 5   111 Newton   Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 6   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Note how cases with <code>gender</code> equal to “female” are no longer in the data frame, while every other case is retained.</p>
<p>Let’s now filter by a variable of type numeric (or integer). Specifically, let’s select those cases in which the <code>perf_q2</code> variable is greater than (<code>&gt;</code>) 4.0. Because the <code>perf_q2</code> variable is of type <em>numeric</em>, we don’t use quotation marks (<code>" "</code>) around the value we wish to filter by, which in this case is 4.0.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="filter.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by perf_q2 with pipe</span></span>
<span id="cb388-2"><a href="filter.html#cb388-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb388-3"><a href="filter.html#cb388-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb388-4"><a href="filter.html#cb388-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb388-5"><a href="filter.html#cb388-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 2 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   198 Morales  Linda     1/7/2016  female     4.9     4.5     4.4     4.8</code></pre>
<p>If we wish to filter by two variables, we can apply the logical “or” (<code>|</code>) operator or “and” (<code>&amp;</code>) operator. First, let’s select those cases in which either <code>gender</code> is equal to “female” or <code>perf_q2</code> is greater than 4.0 using the “or” (<code>|</code>) operator.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="filter.html#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender or perf_q2 with pipe</span></span>
<span id="cb390-2"><a href="filter.html#cb390-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(gender<span class="sc">==</span><span class="st">&quot;female&quot;</span> <span class="sc">|</span> perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb390-3"><a href="filter.html#cb390-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb390-4"><a href="filter.html#cb390-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb390-5"><a href="filter.html#cb390-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 4 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez    Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 3   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 4   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1</code></pre>
<p>Watch what happens if we apply the logical “and” (<code>&amp;</code>) operator with the same syntax as above.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="filter.html#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender and perf_q2 with pipe</span></span>
<span id="cb392-2"><a href="filter.html#cb392-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(gender<span class="sc">==</span><span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb392-3"><a href="filter.html#cb392-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb392-4"><a href="filter.html#cb392-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb392-5"><a href="filter.html#cb392-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 1 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   198 Morales  Linda     1/7/2016  female     4.9     4.5     4.4     4.8</code></pre>
<p>We can also use the logical “or” (<code>|</code>) operator to select two values of the same variable.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="filter.html#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by two values of firstname with pipe</span></span>
<span id="cb394-2"><a href="filter.html#cb394-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(firstname<span class="sc">==</span><span class="st">&quot;John&quot;</span> <span class="sc">|</span> firstname<span class="sc">==</span><span class="st">&quot;Jane&quot;</span>)</span>
<span id="cb394-3"><a href="filter.html#cb394-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-4"><a href="filter.html#cb394-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb394-5"><a href="filter.html#cb394-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 3 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 2   165 Doe      Jane      1/4/2016  female    NA      NA      NA      NA  
## 3   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Or we can select two ranges of values from the same variable using the logical “or” (<code>|</code>) operator, assuming the variable is of type numeric, integer, or date.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="filter.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by two ranges of values of perf_q1 with pipe</span></span>
<span id="cb396-2"><a href="filter.html#cb396-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(perf_q1<span class="sc">&lt;=</span><span class="fl">2.5</span> <span class="sc">|</span> perf_q1<span class="sc">&gt;=</span><span class="fl">4.0</span>)</span>
<span id="cb396-3"><a href="filter.html#cb396-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb396-4"><a href="filter.html#cb396-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb396-5"><a href="filter.html#cb396-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 4 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   125 Franklin   Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 2   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 3   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 4   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>The <code>filter</code> function can also be used to remove multiple specific cases (such as from a unique identifier variable), which might be useful when you’ve identified outliers that need to be removed. As a first step, identify a vector of values that need to be removed. In this example, let’s pretend that cases with <code>id</code> variable values of 198 and 201 no longer work for this company, so they should be removed from the sample. To create a vector of these two values, use the <code>c</code> function like this: <code>c(198,201)</code>. Next, because you are now filtering by a vector, you will need to use the <code>%in%</code> operator, which is an operator that instructs R to go through each value of the filter variable (<code>id</code>) and identify instances of 198 and 201 (<code>c(198,201)</code>); if the values match, then those cases are retained. However, because we entered <code>!</code> in front of the filter variable, this actually reverses our logic and instructs R to <em>remove</em> those cases in which a value of the filter variable matches a value contained in the vector.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="filter.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out id of 198 and 201 with pipe</span></span>
<span id="cb398-2"><a href="filter.html#cb398-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">198</span>,<span class="dv">201</span>))</span>
<span id="cb398-3"><a href="filter.html#cb398-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-4"><a href="filter.html#cb398-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb398-5"><a href="filter.html#cb398-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 7 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 4   165 Doe      Jane      1/4/2016  female    NA      NA      NA      NA  
## 5   125 Franklin Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 6   111 Newton   Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 7   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Note that in the output above cases with <code>id</code> variable values equal to 198 and 201 are no longer present.</p>
<p>If you remove the <code>!</code> in front of the filter variable, only cases <code>198</code> and <code>201</code> are retained.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="filter.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in id of 198 and 201 with pipe</span></span>
<span id="cb400-2"><a href="filter.html#cb400-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">198</span>,<span class="dv">201</span>))</span>
<span id="cb400-3"><a href="filter.html#cb400-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-4"><a href="filter.html#cb400-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb400-5"><a href="filter.html#cb400-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 2 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 2   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1</code></pre>
<p>And if you wanted to remove just a single case, you could use the unique identifier variable (<code>id</code>) and the following script/code.</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="filter.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out id of 198 with pipe</span></span>
<span id="cb402-2"><a href="filter.html#cb402-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(id<span class="sc">!=</span><span class="dv">198</span>)</span>
<span id="cb402-3"><a href="filter.html#cb402-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb402-4"><a href="filter.html#cb402-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb402-5"><a href="filter.html#cb402-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 8 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez    Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald   Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith      John      1/9/2016  male      NA      NA      NA      NA  
## 4   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 5   125 Franklin   Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 6   111 Newton     Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 7   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 8   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>When working with variables of type <em>Date</em>, things can get a bit trickier. When we applied the <code>str</code> function from base R (see above), we found that the <code>startdate</code> variable was read in and joined as a character variable as opposed to a date variable. As such, we need to convert the <code>startdate</code> variable using the <code>as.Date</code> function from base R. First, type the name of the data frame object (<code>mergeddf</code>), followed by the <code>$</code> operator and the name of whatever you want to call the new variable (<code>startdate2</code>); remember, the <code>$</code> operator tells R that a variable belongs to (or will belong to) a particular data frame. Second, type the <code>&lt;-</code> operator. Third, type the name of the <code>as.Date</code> function. Fourth, in the function parentheses, as the first argument, enter the <code>as.character</code> function with the name of the data frame object (<code>mergeddf</code>), followed by the <code>$</code> operator and the name the original variable (<code>startdate</code>) as the sole argument. Fifth, as the second argument in the <code>as.Date</code> function, type <code>format="%m/%d/%Y"</code> to indicate the format for the data variable; note that the capital <code>Y</code> in <code>%Y</code> implies a 4-digit year, whereas a lower case would imply a 2-digit year.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="filter.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character startdate variable to the Date type startdate2 variable</span></span>
<span id="cb404-2"><a href="filter.html#cb404-2" aria-hidden="true" tabindex="-1"></a>mergeddf<span class="sc">$</span>startdate2 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(mergeddf<span class="sc">$</span>startdate), <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span></code></pre></div>
<p>To verify that the new <code>startdate2</code> variable is of type date, use the <code>str</code> function from base R, and enter the name of the data frame object (<code>mergeddf</code>) as the sole argument. As you will see, the new <code>startdate2</code> variable is now of type <em>Date</em>.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="filter.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify that the startdate2 variable is now a variable of type Date</span></span>
<span id="cb405-2"><a href="filter.html#cb405-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mergeddf)</span></code></pre></div>
<pre><code>## spec_tbl_df[,10] [9 x 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ id        : num [1:9] 153 154 155 165 125 111 198 201 282
##  $ lastname  : chr [1:9] &quot;Sanchez&quot; &quot;McDonald&quot; &quot;Smith&quot; &quot;Doe&quot; ...
##  $ firstname : chr [1:9] &quot;Alejandro&quot; &quot;Ronald&quot; &quot;John&quot; &quot;Jane&quot; ...
##  $ startdate : chr [1:9] &quot;1/1/2016&quot; &quot;1/9/2016&quot; &quot;1/9/2016&quot; &quot;1/4/2016&quot; ...
##  $ gender    : chr [1:9] &quot;male&quot; &quot;male&quot; &quot;male&quot; &quot;female&quot; ...
##  $ perf_q1   : num [1:9] 3.9 NA NA NA 2.1 3.3 4.9 1.2 2.2
##  $ perf_q2   : num [1:9] 4.8 NA NA NA 1.9 3.3 4.5 1.1 2.3
##  $ perf_q3   : num [1:9] 4.9 NA NA NA 2.1 3.4 4.4 1 2.4
##  $ perf_q4   : num [1:9] 5 NA NA NA 2.3 3.3 4.8 1 2.5
##  $ startdate2: Date[1:9], format: &quot;2016-01-01&quot; &quot;2016-01-09&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   id = col_double(),
##   ..   lastname = col_character(),
##   ..   firstname = col_character(),
##   ..   startdate = col_character(),
##   ..   gender = col_character()
##   .. )</code></pre>
<p>Now we are ready to filter using the new <code>startdate2</code> variable. When specify the value of the <code>startdate2</code> variable by which you wish to filter by, make sure to use the <code>as.Date</code> function once more with the date (formatted as YYYY-MM-DD) in quotation marks (<code>" "</code>) as the sole argument. Here, I filter for those cases in which their <code>startdate2</code> values are greater than 2016-01-07.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="filter.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by startdate2 with pipe</span></span>
<span id="cb407-2"><a href="filter.html#cb407-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(startdate2 <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">&quot;2016-01-07&quot;</span>))</span>
<span id="cb407-3"><a href="filter.html#cb407-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb407-4"><a href="filter.html#cb407-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb407-5"><a href="filter.html#cb407-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 5 x 10
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   154 McDonald   Ronald    1/9/2016  male      NA      NA      NA      NA  
## 2   155 Smith      John      1/9/2016  male      NA      NA      NA      NA  
## 3   111 Newton     Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 4   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 5   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5
## # ... with 1 more variable: startdate2 &lt;date&gt;</code></pre>
</div>
<div id="without-pipes" class="section level3" number="18.1.2">
<h3><span class="header-section-number">18.1.2</span> <em>Without</em> Pipes</h3>
<p>We can also filter using the <code>filter</code> function from the <code>dplyr</code> package without using the pipe (<code>%&gt;%</code>) operator. Note how I simply move the name of the data frame object from before the pipe (<code>%&gt;%</code>) operator to the first argument in the <code>filter</code> function. Everything else remains the same. For simplicity, I don’t display the output below as it is the same as the output as above using pipes. <em>Your decision whether to use a pipe operator is completely up to you.</em></p>
<p>Let’s filter the <code>mergeddf</code> data frame object such that only those cases for which the <code>gender</code> variable is equal to “female” are retained. Note how we apply the equal to (<code>==</code>) logical operator. A table of logical operators is presented towards the beginning of this tutorial.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="filter.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in by gender without pipe</span></span>
<span id="cb409-2"><a href="filter.html#cb409-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, gender<span class="sc">==</span><span class="st">&quot;female&quot;</span>)</span>
<span id="cb409-3"><a href="filter.html#cb409-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb409-4"><a href="filter.html#cb409-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb409-5"><a href="filter.html#cb409-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Now let’s filter <em>out</em> those cases in which <code>gender</code> is <em>not</em> equal to “female.” We apply the not equal to (<code>!=</code>) logical operator to do so.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="filter.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in by gender without pipe</span></span>
<span id="cb410-2"><a href="filter.html#cb410-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, gender<span class="sc">!=</span><span class="st">&quot;female&quot;</span>)</span>
<span id="cb410-3"><a href="filter.html#cb410-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb410-4"><a href="filter.html#cb410-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb410-5"><a href="filter.html#cb410-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Filter the data frame such that we retain those cases for which the <code>perf_q2</code> variable is greater than (<code>&gt;</code>) 4.0. Because the <code>perf_q2</code> variable is numeric, we <em>don’t</em> put the value 4.0 in quotation marks.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="filter.html#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by perf_q2 without pipe</span></span>
<span id="cb411-2"><a href="filter.html#cb411-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb411-3"><a href="filter.html#cb411-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb411-4"><a href="filter.html#cb411-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb411-5"><a href="filter.html#cb411-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Using the logical “or” operator (<code>|</code>), select those cases for which <code>gender</code> is equal to “female” <em>or</em> for which <code>perf_q2</code> is greater than 4.0.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="filter.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender or perf_q2 without pipe</span></span>
<span id="cb412-2"><a href="filter.html#cb412-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, gender<span class="sc">==</span><span class="st">&quot;female&quot;</span> <span class="sc">|</span> perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb412-3"><a href="filter.html#cb412-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb412-4"><a href="filter.html#cb412-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb412-5"><a href="filter.html#cb412-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Using the logical “and” operator (<code>&amp;</code>), select those cases for which <code>gender</code> is equal to “female” <em>and</em> for which <code>perf_q2</code> is greater than 4.0. Note the difference in the resulting filtered data frame.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="filter.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender and perf_q2 without pipe</span></span>
<span id="cb413-2"><a href="filter.html#cb413-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, gender<span class="sc">==</span><span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb413-3"><a href="filter.html#cb413-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb413-4"><a href="filter.html#cb413-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb413-5"><a href="filter.html#cb413-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Using the logical “or” operator (<code>|</code>), select those cases for which <code>firstname</code> is equal to “John” <em>or</em> for which <code>firstname</code> is equal to “Jane.” In other words, select those individuals whose names are either “John” or “Jane.”</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="filter.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by two values of firstname without pipe</span></span>
<span id="cb414-2"><a href="filter.html#cb414-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, firstname<span class="sc">==</span><span class="st">&quot;John&quot;</span> <span class="sc">|</span> firstname<span class="sc">==</span><span class="st">&quot;Jane&quot;</span>)</span>
<span id="cb414-3"><a href="filter.html#cb414-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb414-4"><a href="filter.html#cb414-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb414-5"><a href="filter.html#cb414-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Using the logical “or” operator (<code>|</code>), select the range of cases for which <code>perf_q1</code> is less than equal to (<code>&lt;=</code>) 2.5 <em>or</em> for which <code>perf_q1</code> is greater than or equal (<code>&gt;=</code>) to 4.0.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="filter.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by two ranges of values of perf_q1 without pipe</span></span>
<span id="cb415-2"><a href="filter.html#cb415-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, perf_q1<span class="sc">&lt;=</span><span class="fl">2.5</span> <span class="sc">|</span> perf_q1<span class="sc">&gt;=</span><span class="fl">4.0</span>)</span>
<span id="cb415-3"><a href="filter.html#cb415-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb415-4"><a href="filter.html#cb415-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb415-5"><a href="filter.html#cb415-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>The <code>filter</code> function can also be used to remove multiple specific cases (such as from a unique identifier variable), which might be useful when you’ve identified outliers that need to be removed. As a first step, identify a vector of values that need to be removed. In this example, let’s pretend that cases with <code>id</code> variable values of 198 and 201 no longer work for this company, so they should be removed from the sample. To create a vector of these two values, use the <code>c</code> function like this: <code>c(198,201)</code>. Next, because you are now filtering by a vector, you will need to use the <code>%in%</code> operator, which is an operator that instructs R to go through each value of the filter variable (<code>id</code>) and identify instances of 198 and 201 (<code>c(198,201)</code>); if the values match, then those cases are retained. However, because we entered <code>!</code> in front of the filter variable, this actually reverses our logic and instructs R to <em>remove</em> those cases in which a value of the filter variable matches a value contained in the vector.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="filter.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out id of 198 and 201 without pipe</span></span>
<span id="cb416-2"><a href="filter.html#cb416-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, <span class="sc">!</span>id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">198</span>,<span class="dv">201</span>))</span>
<span id="cb416-3"><a href="filter.html#cb416-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb416-4"><a href="filter.html#cb416-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb416-5"><a href="filter.html#cb416-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>Or if you wish to retain only those cases for which the <code>id</code> variable is equal to 198 and 201, drop the not operator (<code>!</code>) from the previous script.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="filter.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in id of 198 and 201 without pipe</span></span>
<span id="cb417-2"><a href="filter.html#cb417-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">198</span>,<span class="dv">201</span>))</span>
<span id="cb417-3"><a href="filter.html#cb417-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb417-4"><a href="filter.html#cb417-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb417-5"><a href="filter.html#cb417-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>You can also drop specific cases one by one using the not equal to operator (<code>!=</code>) and the a unique identifier value associated with the case you wish to remove. We accomplish the same result as above but use two steps instead. Also, note that in the second step below, the new data frame object (<code>filterdf</code>) is used as the first argument because we want to retain the changes we made in the prior step (i.e., dropping case with <code>id</code> equal to 198).</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="filter.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in id of 198 without pipe</span></span>
<span id="cb418-2"><a href="filter.html#cb418-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, id<span class="sc">!=</span><span class="dv">198</span>)</span>
<span id="cb418-3"><a href="filter.html#cb418-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-4"><a href="filter.html#cb418-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in id of 201 without pipe</span></span>
<span id="cb418-5"><a href="filter.html#cb418-5" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(filterdf, id<span class="sc">!=</span><span class="dv">201</span>)</span>
<span id="cb418-6"><a href="filter.html#cb418-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-7"><a href="filter.html#cb418-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb418-8"><a href="filter.html#cb418-8" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<p>When working with variables of type <em>Date</em>, things can get a bit trickier. When we applied the <code>str</code> function from base R (see above), we found that the <code>startdate</code> variable was read in and joined as a character variable as opposed to a date variable. As such, we need to convert the <code>startdate</code> variable using the <code>as.Date</code> function from base R. First, type the name of the data frame object (<code>mergeddf</code>), followed by the <code>$</code> operator and the name of whatever you want to call the new variable (<code>startdate2</code>); remember, the <code>$</code> operator tells R that a variable belongs to (or will belong to) a particular data frame. Second, type the <code>&lt;-</code> operator. Third, type the name of the <code>as.Date</code> function. Fourth, in the function parentheses, as the first argument, enter the <code>as.character</code> function with the name of the data frame object (<code>mergeddf</code>), followed by the <code>$</code> operator and the name the original variable (<code>startdate</code>) as the sole argument. Fifth, as the second argument in the <code>as.Date</code> function, type <code>format="%m/%d/%Y"</code> to indicate the format for the data variable; note that the capital <code>Y</code> in <code>%Y</code> implies a 4-digit year, whereas a lower case would imply a 2-digit year. To verify that the new <code>startdate2</code> variable is of type date, on the next line, use the <code>str</code> function from base R, and enter the name of the data frame object (<code>mergeddf</code>) as the sole argument. As you will see, the new <code>startdate2</code> variable is now of type <em>Date</em>.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="filter.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character startdate variable to the date type startdate2 variable</span></span>
<span id="cb419-2"><a href="filter.html#cb419-2" aria-hidden="true" tabindex="-1"></a>mergeddf<span class="sc">$</span>startdate2 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(mergeddf<span class="sc">$</span>startdate), <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb419-3"><a href="filter.html#cb419-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb419-4"><a href="filter.html#cb419-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify that the startdate2 variable is now a variable of type date</span></span>
<span id="cb419-5"><a href="filter.html#cb419-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mergeddf)</span></code></pre></div>
<p>Now we are ready to filter using the new <code>startdate2</code> variable. When specify the value of the <code>startdate2</code> variable by which you wish to filter by, make sure to use the <code>as.Date</code> function once more with the date (formatted as YYYY-MM-DD) in quotation marks (<code>" "</code>) as the sole argument. Here, I filter for those cases in which their <code>startdate2</code> values are greater than 2016-01-07.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="filter.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by startdate2 without pipe</span></span>
<span id="cb420-2"><a href="filter.html#cb420-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">filter</span>(mergeddf, startdate2 <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">&quot;2016-01-07&quot;</span>))</span>
<span id="cb420-3"><a href="filter.html#cb420-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb420-4"><a href="filter.html#cb420-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb420-5"><a href="filter.html#cb420-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
</div>
</div>
<div id="remove-single-variable-from-data-frame" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> Remove Single Variable from Data Frame</h2>
<p>If you just need to remove a single variable from a data frame, using the <code>NULL</code> object in R in conjunction with the <code>&lt;-</code> operator can designate which variable to drop. For example, if we wish to drop the <code>startdate</code> variable from the <code>mergeddf</code> data frame, we simply note that <code>startdate</code> belongs to <code>mergeddf</code> by joining them with <code>$</code>. Next, we set <code>&lt;- NULL</code> adjacent to <code>mergeddf$startdate</code> to indicate that we wish to remove that variable from that data frame.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="filter.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove variable</span></span>
<span id="cb421-2"><a href="filter.html#cb421-2" aria-hidden="true" tabindex="-1"></a>mergeddf<span class="sc">$</span>startdate <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb421-3"><a href="filter.html#cb421-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb421-4"><a href="filter.html#cb421-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb421-5"><a href="filter.html#cb421-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
<pre><code>## # A tibble: 9 x 9
##      id lastname   firstname gender perf_q1 perf_q2 perf_q3 perf_q4 startdate2
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
## 1   153 Sanchez    Alejandro male       3.9     4.8     4.9     5   2016-01-01
## 2   154 McDonald   Ronald    male      NA      NA      NA      NA   2016-01-09
## 3   155 Smith      John      male      NA      NA      NA      NA   2016-01-09
## 4   165 Doe        Jane      female    NA      NA      NA      NA   2016-01-04
## 5   125 Franklin   Benjamin  male       2.1     1.9     2.1     2.3 2016-01-05
## 6   111 Newton     Isaac     male       3.3     3.3     3.4     3.3 2016-01-09
## 7   198 Morales    Linda     female     4.9     4.5     4.4     4.8 2016-01-07
## 8   201 Providence Cindy     female     1.2     1.1     1       1   2016-01-09
## 9   282 Legend     John      male       2.2     2.3     2.4     2.5 2016-01-09</code></pre>
</div>
<div id="select_multiplevariables" class="section level2" number="18.3">
<h2><span class="header-section-number">18.3</span> Select Multiple Variables from Data Frame</h2>
<p>If you wish to <em>select multiple variables</em> from a data frame (and remove all others), the <code>select</code> function from the <code>dplyr</code> package is quite useful and intuitive. Below, I demonstrate how to select multiple variables with and without pipes. If you don’t want to use pipes, feel free to skip down to the section called <em>Without Pipes</em>.</p>
<div id="with-pipe" class="section level3" number="18.3.1">
<h3><span class="header-section-number">18.3.1</span> <em>With</em> Pipe</h3>
<p>Using the pipe (<code>%&gt;%</code>) operator, first, decide whether you want to override an existing data frame or create a new data frame based on our selection; here, I override the <code>mergeddf</code> data frame using the <code>&lt;-</code> operator, which results in <code>mergeddf &lt;-</code>. Second, type the name of the original data frame (<code>mergeddf</code>), followed by the pipe (<code>%&gt;%</code>) operator. Third, type the name of the <code>select</code> function. Fourth, in the parentheses, list the names of the variables you wish to select as arguments; all variables that are not listed will be dropped. Here, we are selecting (to retain) the <code>id</code>, <code>perf_q1</code>, <code>gender</code>, <code>lastname</code>, and <code>firstname</code> variables. Note that the updated date frame includes the selected variables in the order in which you listed them.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="filter.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select multiple variables with pipe</span></span>
<span id="cb423-2"><a href="filter.html#cb423-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">select</span>(id, perf_q1, gender, lastname, firstname)</span>
<span id="cb423-3"><a href="filter.html#cb423-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb423-4"><a href="filter.html#cb423-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb423-5"><a href="filter.html#cb423-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
<pre><code>## # A tibble: 9 x 5
##      id perf_q1 gender lastname   firstname
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;    
## 1   153     3.9 male   Sanchez    Alejandro
## 2   154    NA   male   McDonald   Ronald   
## 3   155    NA   male   Smith      John     
## 4   165    NA   female Doe        Jane     
## 5   125     2.1 male   Franklin   Benjamin 
## 6   111     3.3 male   Newton     Isaac    
## 7   198     4.9 female Morales    Linda    
## 8   201     1.2 female Providence Cindy    
## 9   282     2.2 male   Legend     John</code></pre>
</div>
<div id="without-pipe" class="section level3" number="18.3.2">
<h3><span class="header-section-number">18.3.2</span> <em>Without</em> Pipe</h3>
<p>If you decide not to use the pipe (<code>%&gt;%</code>) operator, the syntax remains almost the same except the name of the original data frame object (<code>mergeddf</code>) is moved from before the pipe (<code>%&gt;%</code>) operator to the first argument in the <code>select</code> function. Everything else remains the same.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="filter.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select multiple variables without pipe</span></span>
<span id="cb425-2"><a href="filter.html#cb425-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> <span class="fu">select</span>(mergeddf, id, gender, lastname, firstname)</span>
<span id="cb425-3"><a href="filter.html#cb425-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb425-4"><a href="filter.html#cb425-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb425-5"><a href="filter.html#cb425-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
</div>
</div>
<div id="remove_multiplevariables" class="section level2" number="18.4">
<h2><span class="header-section-number">18.4</span> Remove Multiple Variables from Data Frame</h2>
<p>If you wish to <em>remove multiple variables</em> from a data frame, the <code>select</code> function from <code>dplyr</code> will work just fine. I demonstrate how to use this function with and without pipes. If you don’t want to use pipes, feel free to skip down to the section called <em>Without Pipes</em>.</p>
<div id="with-pipe-1" class="section level3" number="18.4.1">
<h3><span class="header-section-number">18.4.1</span> <em>With</em> Pipe</h3>
<p>Using the pipe (<code>%&gt;%</code>) operator, first, decide whether you want to override an existing data frame or create a new data frame from the subset; here, I override the <code>mergeddf</code> data frame using the <code>&lt;-</code> operator, which results in <code>mergeddf &lt;-</code>. Second, type the name of the original data frame (<code>mergeddf</code>), followed by the pipe (<code>%&gt;%</code>) operator. Third, enter the <code>select</code> function. Fourth, use the <code>c</code> (combine) function with <code>-</code> in front of it to note that you want to select all other variables <em>except</em> the ones listed in the <code>c</code> function.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="filter.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove multiple variables with pipe</span></span>
<span id="cb426-2"><a href="filter.html#cb426-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(lastname, firstname))</span>
<span id="cb426-3"><a href="filter.html#cb426-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-4"><a href="filter.html#cb426-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb426-5"><a href="filter.html#cb426-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##      id perf_q1 gender
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; 
## 1   153     3.9 male  
## 2   154    NA   male  
## 3   155    NA   male  
## 4   165    NA   female
## 5   125     2.1 male  
## 6   111     3.3 male  
## 7   198     4.9 female
## 8   201     1.2 female
## 9   282     2.2 male</code></pre>
<p>Removing a single variable can also be done using the <code>select</code> function. To do so, just list a single variable with <code>-</code> in front of it (as the sole argument) to indicate that you wish to drop that variable.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="filter.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove single variable with pipe</span></span>
<span id="cb428-2"><a href="filter.html#cb428-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>gender)</span>
<span id="cb428-3"><a href="filter.html#cb428-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-4"><a href="filter.html#cb428-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb428-5"><a href="filter.html#cb428-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
<pre><code>## # A tibble: 9 x 2
##      id perf_q1
##   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153     3.9
## 2   154    NA  
## 3   155    NA  
## 4   165    NA  
## 5   125     2.1
## 6   111     3.3
## 7   198     4.9
## 8   201     1.2
## 9   282     2.2</code></pre>
</div>
<div id="without-pipe-1" class="section level3" number="18.4.2">
<h3><span class="header-section-number">18.4.2</span> <em>Without</em> Pipe</h3>
<p>If you decide <em>not</em> to use the pipe (<code>%&gt;%</code>) operator, the syntax remains mostly the same except the name of the original data frame object (<code>mergeddf</code>) is moved from before the pipe (<code>%&gt;%</code>) operator to the first argument in the <code>select</code> function. Everything else remains the same.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="filter.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove multiple variables without pipe</span></span>
<span id="cb430-2"><a href="filter.html#cb430-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> <span class="fu">select</span>(mergeddf, <span class="sc">-</span><span class="fu">c</span>(lastname, firstname))</span>
<span id="cb430-3"><a href="filter.html#cb430-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-4"><a href="filter.html#cb430-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb430-5"><a href="filter.html#cb430-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
<p>And here’s the non-pipe equivalent to removing a single variable using this approach.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="filter.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove single variable without pipe</span></span>
<span id="cb431-2"><a href="filter.html#cb431-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> mergeddf <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>gender)</span>
<span id="cb431-3"><a href="filter.html#cb431-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-4"><a href="filter.html#cb431-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print updated data frame</span></span>
<span id="cb431-5"><a href="filter.html#cb431-5" aria-hidden="true" tabindex="-1"></a>mergeddf</span></code></pre></div>
</div>
</div>
<div id="summary-9" class="section level2" number="18.5">
<h2><span class="header-section-number">18.5</span> Summary</h2>
<p>Applying filters and creating subsets of cases (rows) and variables (columns) from a data frame is an important part of data management. The <code>dplyr</code> package has two useful functions that can be used for these purposes: <code>filter</code> and <code>select.</code></p>
</div>
<div id="filter_supplement" class="section level2" number="18.6">
<h2><span class="header-section-number">18.6</span> Chapter Supplement</h2>
<p>In addition to the <code>filter</code> function from the <code>dplyr</code> package covered <a href="filter.html#filter_cases">above</a>, we can use the <code>subset</code> function from base R to subset cases from a data frame and to select cases from a data frame. Because this function comes from base R, we do not need to install and access an additional package like we do with the <code>filter</code> function, which some may prefer or find advantageous. Further, we can also apply the <code>str_detect</code> function from the <code>stringr</code> package with either the <code>subset</code> or the <code>filter</code> function to filter by a text pattern contained within a string (e.g., character) variable.</p>
<div id="filter_supplement_functions" class="section level4" number="18.6.0.1">
<h4><span class="header-section-number">18.6.0.1</span> Functions &amp; Packages Introduced</h4>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>subset</code></td>
<td>base <code>R</code></td>
</tr>
<tr class="even">
<td><code>str_detect</code></td>
<td><code>stringr</code></td>
</tr>
</tbody>
</table>
</div>
<div id="filter_initsteps_supplement" class="section level4" number="18.6.0.2">
<h4><span class="header-section-number">18.6.0.2</span> Initial Steps</h4>
<p>If required, please refer to the <a href="filter.html#initsteps_filter">Initial Steps</a> section from this chapter for more information on these initial steps.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="filter.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your working directory</span></span>
<span id="cb432-2"><a href="filter.html#cb432-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;H:/RWorkshop&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="filter.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access readr package</span></span>
<span id="cb433-2"><a href="filter.html#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb433-3"><a href="filter.html#cb433-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-4"><a href="filter.html#cb433-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data and name data frame (tibble) objects</span></span>
<span id="cb433-5"><a href="filter.html#cb433-5" aria-hidden="true" tabindex="-1"></a>personaldata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;PersData.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   id = col_double(),
##   lastname = col_character(),
##   firstname = col_character(),
##   startdate = col_character(),
##   gender = col_character()
## )</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="filter.html#cb435-1" aria-hidden="true" tabindex="-1"></a>performancedata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;PerfData.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   id = col_double(),
##   perf_q1 = col_double(),
##   perf_q2 = col_double(),
##   perf_q3 = col_double(),
##   perf_q4 = col_double()
## )</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="filter.html#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the names of the variables in the data frame (tibble) objects</span></span>
<span id="cb437-2"><a href="filter.html#cb437-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(personaldata)</span></code></pre></div>
<pre><code>## [1] &quot;id&quot;        &quot;lastname&quot;  &quot;firstname&quot; &quot;startdate&quot; &quot;gender&quot;</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="filter.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(performancedata)</span></code></pre></div>
<pre><code>## [1] &quot;id&quot;      &quot;perf_q1&quot; &quot;perf_q2&quot; &quot;perf_q3&quot; &quot;perf_q4&quot;</code></pre>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="filter.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame (tibble) objects</span></span>
<span id="cb441-2"><a href="filter.html#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(personaldata)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 5
##      id lastname   firstname startdate gender
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt; 
## 1   153 Sanchez    Alejandro 1/1/2016  male  
## 2   154 McDonald   Ronald    1/9/2016  male  
## 3   155 Smith      John      1/9/2016  male  
## 4   165 Doe        Jane      1/4/2016  female
## 5   125 Franklin   Benjamin  1/5/2016  male  
## 6   111 Newton     Isaac     1/9/2016  male  
## 7   198 Morales    Linda     1/7/2016  female
## 8   201 Providence Cindy     1/9/2016  female
## 9   282 Legend     John      1/9/2016  male</code></pre>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="filter.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(performancedata)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##      id perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153     3.9     4.8     4.9     5  
## 2   125     2.1     1.9     2.1     2.3
## 3   111     3.3     3.3     3.4     3.3
## 4   198     4.9     4.5     4.4     4.8
## 5   201     1.2     1.1     1       1  
## 6   282     2.2     2.3     2.4     2.5</code></pre>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="filter.html#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access package</span></span>
<span id="cb445-2"><a href="filter.html#cb445-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="filter.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full join (without pipe)</span></span>
<span id="cb446-2"><a href="filter.html#cb446-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(personaldata, performancedata, <span class="at">by=</span><span class="st">&quot;id&quot;</span>)</span>
<span id="cb446-3"><a href="filter.html#cb446-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-4"><a href="filter.html#cb446-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print joined (merged) data frame object</span></span>
<span id="cb446-5"><a href="filter.html#cb446-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mergeddf)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez    Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald   Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith      John      1/9/2016  male      NA      NA      NA      NA  
## 4   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 5   125 Franklin   Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 6   111 Newton     Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 7   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 8   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 9   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
</div>
<div id="filter_subset_supplement" class="section level3" number="18.6.1">
<h3><span class="header-section-number">18.6.1</span> <code>subset</code> Function from Base R</h3>
<p>As an alternative to the <code>filter</code> function from the <code>dplyr</code> package, we will learn how to use the <code>subset</code> function from base R to filter cases from a data frame and to select or remove variables from a data frame.</p>
<div id="supp_filter_video" class="section level4" number="18.6.1.1">
<h4><span class="header-section-number">18.6.1.1</span> Video Tutorials</h4>
<p>In addition to the written chapter supplement provided below, you can follow along with the following video tutorials to learn more about how to subset cases and select/remove variables using the <code>subset</code> function from base R.</p>
<iframe src="https://youtube.com/embed/iM1e0wxUMrs?rel=0" width="672" height="400px">
</iframe>
<p>Link to Video Tutorial: <a href="https://youtu.be/iM1e0wxUMrs" class="uri">https://youtu.be/iM1e0wxUMrs</a></p>
<iframe src="https://youtube.com/embed/kNpezEOx70g?rel=0" width="672" height="400px">
</iframe>
<p>Link to Video Tutorial: <a href="https://youtu.be/kNpezEOx70g" class="uri">https://youtu.be/kNpezEOx70g</a></p>
</div>
<div id="supp_filter_cases" class="section level4" number="18.6.1.2">
<h4><span class="header-section-number">18.6.1.2</span> Filter Cases from Data Frame</h4>
<p>We’ll begin by filtering cases from a data frame object. As a reminder, in R, we can apply any one of the following logical operators when filtering cases from a data frame or table object.</p>
<table>
<thead>
<tr class="header">
<th>Logical Operator</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>“less than”</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>“greater than”</td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>“less than or equal to”</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>“greater than or equal to”</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>“equal to”</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>“not equal to”</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>“or”</td>
</tr>
<tr class="even">
<td><code>&amp;</code></td>
<td>“and”</td>
</tr>
<tr class="odd">
<td><code>!</code></td>
<td>“not”</td>
</tr>
</tbody>
</table>
<p>To filter cases from a data frame object using the <code>subset</code> function from base R, use the <code>&lt;-</code> operator to name the filtered data frame that we are about to create. For this example, I name the new joined data frame <code>filterdf</code>; you could name it whatever you would like. To the right of the <code>&lt;-</code> operator, type the name of <code>subset</code> function from base R. As the first argument in the function, enter the name of the data frame we created above (<code>mergeddf</code>). As the second argument, type the name of the variable we wish to filter the data frame by, which in this example is <code>gender</code> followed by a logical/conditional argument. For this example, we wish to to retain only those cases in which <code>gender</code> is equal to “female,” and we do so using this logical argument <code>gender=="female"</code>. Because the <code>gender</code> variable is of type <em>character</em>, we need to put quotation marks (<code>" "</code>) around the value of the variable that we wish to filter by. Remember, object names in R are case and space sensitive; for instance, <code>gender</code> is different from <code>Gender</code>, and “female” is different from “Female.”</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="filter.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender</span></span>
<span id="cb448-2"><a href="filter.html#cb448-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, gender<span class="sc">==</span><span class="st">&quot;female&quot;</span>)</span>
<span id="cb448-3"><a href="filter.html#cb448-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-4"><a href="filter.html#cb448-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb448-5"><a href="filter.html#cb448-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 3 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 2   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 3   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1</code></pre>
<p>Note how the data frame above contains only those cases with “female” as their <code>gender</code> variable designation. The filter worked as expected.</p>
<p>Alternatively, we could filter <em>out</em> those cases in which <code>gender</code> is equal to “female” using the <code>!=</code> (not equal to) logical operator.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="filter.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender</span></span>
<span id="cb450-2"><a href="filter.html#cb450-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, gender<span class="sc">!=</span><span class="st">&quot;female&quot;</span>)</span>
<span id="cb450-3"><a href="filter.html#cb450-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-4"><a href="filter.html#cb450-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb450-5"><a href="filter.html#cb450-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 4   125 Franklin Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 5   111 Newton   Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 6   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Note how cases with <code>gender</code> equal to “female” are no longer in the data frame, while every other case is retained.</p>
<p>Let’s now filter by a variable of type <em>numeric</em> (or <em>integer</em>). Specifically, let’s select those cases in which the <code>perf_q2</code> variable is greater than (<code>&gt;</code>) 4.0. Because the <code>perf_q2</code> variable is of type <em>numeric</em>, we don’t use quotation marks (<code>" "</code>) around the value we wish to filter by, which in this case is 4.0.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="filter.html#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by perf_q2</span></span>
<span id="cb452-2"><a href="filter.html#cb452-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb452-3"><a href="filter.html#cb452-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-4"><a href="filter.html#cb452-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb452-5"><a href="filter.html#cb452-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 2 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   198 Morales  Linda     1/7/2016  female     4.9     4.5     4.4     4.8</code></pre>
<p>If we wish to filter by two variables, we can apply the logical “or” (<code>|</code>) operator or “and” (<code>&amp;</code>) operator. First, let’s select those cases in which either <code>gender</code> is equal to “female” or <code>perf_q2</code> is greater than 4.0 using the “or” (<code>|</code>) operator.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="filter.html#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender or perf_q2</span></span>
<span id="cb454-2"><a href="filter.html#cb454-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, gender<span class="sc">==</span><span class="st">&quot;female&quot;</span> <span class="sc">|</span> perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb454-3"><a href="filter.html#cb454-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-4"><a href="filter.html#cb454-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb454-5"><a href="filter.html#cb454-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 4 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez    Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   165 Doe        Jane      1/4/2016  female    NA      NA      NA      NA  
## 3   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 4   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1</code></pre>
<p>Watch what happens if we apply the logical “and” (<code>&amp;</code>) operator with the same syntax as above.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="filter.html#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by gender and perf_q2</span></span>
<span id="cb456-2"><a href="filter.html#cb456-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, gender<span class="sc">==</span><span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> perf_q2<span class="sc">&gt;</span><span class="fl">4.0</span>)</span>
<span id="cb456-3"><a href="filter.html#cb456-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-4"><a href="filter.html#cb456-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb456-5"><a href="filter.html#cb456-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 1 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   198 Morales  Linda     1/7/2016  female     4.9     4.5     4.4     4.8</code></pre>
<p>We can also use the logical “or” (<code>|</code>) operator to select two values of the same variable.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="filter.html#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by two values of firstname</span></span>
<span id="cb458-2"><a href="filter.html#cb458-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, firstname<span class="sc">==</span><span class="st">&quot;John&quot;</span> <span class="sc">|</span> firstname<span class="sc">==</span><span class="st">&quot;Jane&quot;</span>)</span>
<span id="cb458-3"><a href="filter.html#cb458-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-4"><a href="filter.html#cb458-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb458-5"><a href="filter.html#cb458-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 3 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 2   165 Doe      Jane      1/4/2016  female    NA      NA      NA      NA  
## 3   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Or we can select two ranges of values from the same variable using the logical “or” (<code>|</code>) operator, assuming the variable is of type numeric, integer, or date.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="filter.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by two ranges of values of perf_q1</span></span>
<span id="cb460-2"><a href="filter.html#cb460-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, perf_q1<span class="sc">&lt;=</span><span class="fl">2.5</span> <span class="sc">|</span> perf_q1<span class="sc">&gt;=</span><span class="fl">4.0</span>)</span>
<span id="cb460-3"><a href="filter.html#cb460-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-4"><a href="filter.html#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb460-5"><a href="filter.html#cb460-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 4 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   125 Franklin   Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 2   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 3   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 4   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>The <code>subset</code> function can also be used to remove multiple specific cases (such as from a unique identifier variable), which might be useful when you’ve identified outliers that need to be removed. As a first step, identify a vector of values that need to be removed. In this example, let’s pretend that cases with <code>id</code> variable values of 198 and 201 no longer work for this company, so they should be removed from the sample. To create a vector of these two values, use the <code>c</code> function like this: <code>c(198,201)</code>. Next, because you are now filtering by a vector, you will need to use the <code>%in%</code> operator, which is an operator that instructs R to go through each value of the filter variable (<code>id</code>) and identify instances of 198 and 201 (<code>c(198,201)</code>); if the values match, then those cases are retained. However, because we entered <code>!</code> in front of the filter variable, this actually reverses our logic and instructs R to <em>remove</em> those cases in which a value of the filter variable matches a value contained in the vector.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="filter.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out id of 198 and 201</span></span>
<span id="cb462-2"><a href="filter.html#cb462-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, <span class="sc">!</span>id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">198</span>,<span class="dv">201</span>))</span>
<span id="cb462-3"><a href="filter.html#cb462-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-4"><a href="filter.html#cb462-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb462-5"><a href="filter.html#cb462-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 7 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 4   165 Doe      Jane      1/4/2016  female    NA      NA      NA      NA  
## 5   125 Franklin Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 6   111 Newton   Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 7   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>Note that in the output above cases with <code>id</code> variable values equal to 198 and 201 are no longer present.</p>
<p>If you remove the <code>!</code> in front of the filter variable, only cases <code>198</code> and <code>201</code> are retained.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="filter.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter in id of 198 and 201</span></span>
<span id="cb464-2"><a href="filter.html#cb464-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">198</span>,<span class="dv">201</span>))</span>
<span id="cb464-3"><a href="filter.html#cb464-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-4"><a href="filter.html#cb464-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb464-5"><a href="filter.html#cb464-5" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 2 x 9
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   198 Morales    Linda     1/7/2016  female     4.9     4.5     4.4     4.8
## 2   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1</code></pre>
<p>You can also drop specific cases one by one using the not equal to operator (<code>!=</code>) and the a unique identifier value associated with the case you wish to remove. We accomplish the same result as above but use two steps instead. Also, note that in the second step below, the new data frame object (<code>filterdf</code>) is used as the first argument because we want to retain the changes we made in the prior step (i.e., dropping case with <code>id</code> equal to 198).</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="filter.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out id of 198</span></span>
<span id="cb466-2"><a href="filter.html#cb466-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, id<span class="sc">!=</span><span class="dv">198</span>)</span>
<span id="cb466-3"><a href="filter.html#cb466-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-4"><a href="filter.html#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out id of 201</span></span>
<span id="cb466-5"><a href="filter.html#cb466-5" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(filterdf, id<span class="sc">!=</span><span class="dv">201</span>)</span>
<span id="cb466-6"><a href="filter.html#cb466-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-7"><a href="filter.html#cb466-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb466-8"><a href="filter.html#cb466-8" aria-hidden="true" tabindex="-1"></a>filterdf</span></code></pre></div>
<pre><code>## # A tibble: 7 x 9
##      id lastname firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   153 Sanchez  Alejandro 1/1/2016  male       3.9     4.8     4.9     5  
## 2   154 McDonald Ronald    1/9/2016  male      NA      NA      NA      NA  
## 3   155 Smith    John      1/9/2016  male      NA      NA      NA      NA  
## 4   165 Doe      Jane      1/4/2016  female    NA      NA      NA      NA  
## 5   125 Franklin Benjamin  1/5/2016  male       2.1     1.9     2.1     2.3
## 6   111 Newton   Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 7   282 Legend   John      1/9/2016  male       2.2     2.3     2.4     2.5</code></pre>
<p>When working with variables of type <em>Date</em>, things can get a bit trickier. When we applied the <code>str</code> function from base R (see above), we found that the <code>startdate</code> variable was read in and joined as a character variable as opposed to a date variable. As such, we need to convert the <code>startdate</code> variable using the <code>as.Date</code> function from base R. First, type the name of the data frame object (<code>mergeddf</code>), followed by the <code>$</code> operator and the name of whatever you want to call the new variable (<code>startdate2</code>); remember, the <code>$</code> operator tells R that a variable belongs to (or will belong to) a particular data frame. Second, type the <code>&lt;-</code> operator. Third, type the name of the <code>as.Date</code> function. Fourth, in the function parentheses, as the first argument, enter the <code>as.character</code> function with the name of the data frame object (<code>mergeddf</code>), followed by the <code>$</code> operator and the name the original variable (<code>startdate</code>) as the sole argument. Fifth, as the second argument in the <code>as.Date</code> function, type <code>format="%m/%d/%Y"</code> to indicate the format for the data variable; note that the capital <code>Y</code> in <code>%Y</code> implies a 4-digit year, whereas a lower case would imply a 2-digit year.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="filter.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert character startdate variable to the Date type startdate2 variable</span></span>
<span id="cb468-2"><a href="filter.html#cb468-2" aria-hidden="true" tabindex="-1"></a>mergeddf<span class="sc">$</span>startdate2 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(mergeddf<span class="sc">$</span>startdate), <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span></code></pre></div>
<p>To verify that the new <code>startdate2</code> variable is of type <em>Date</em>, use the <code>str</code> function from base R, and enter the name of the data frame object (<code>mergeddf</code>) as the sole argument. As you will see, the new <code>startdate2</code> variable is now of type <em>Date</em>.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="filter.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify that the startdate2 variable is now a variable of type Date</span></span>
<span id="cb469-2"><a href="filter.html#cb469-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mergeddf)</span></code></pre></div>
<pre><code>## spec_tbl_df[,10] [9 x 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ id        : num [1:9] 153 154 155 165 125 111 198 201 282
##  $ lastname  : chr [1:9] &quot;Sanchez&quot; &quot;McDonald&quot; &quot;Smith&quot; &quot;Doe&quot; ...
##  $ firstname : chr [1:9] &quot;Alejandro&quot; &quot;Ronald&quot; &quot;John&quot; &quot;Jane&quot; ...
##  $ startdate : chr [1:9] &quot;1/1/2016&quot; &quot;1/9/2016&quot; &quot;1/9/2016&quot; &quot;1/4/2016&quot; ...
##  $ gender    : chr [1:9] &quot;male&quot; &quot;male&quot; &quot;male&quot; &quot;female&quot; ...
##  $ perf_q1   : num [1:9] 3.9 NA NA NA 2.1 3.3 4.9 1.2 2.2
##  $ perf_q2   : num [1:9] 4.8 NA NA NA 1.9 3.3 4.5 1.1 2.3
##  $ perf_q3   : num [1:9] 4.9 NA NA NA 2.1 3.4 4.4 1 2.4
##  $ perf_q4   : num [1:9] 5 NA NA NA 2.3 3.3 4.8 1 2.5
##  $ startdate2: Date[1:9], format: &quot;2016-01-01&quot; &quot;2016-01-09&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   id = col_double(),
##   ..   lastname = col_character(),
##   ..   firstname = col_character(),
##   ..   startdate = col_character(),
##   ..   gender = col_character()
##   .. )</code></pre>
<p>Now we are ready to filter using the new <code>startdate2</code> variable. When specify the value of the <code>startdate2</code> variable by which you wish to filter by, make sure to use the <code>as.Date</code> function once more with the date (formatted as YYYY-MM-DD) in quotation marks (<code>" "</code>) as the sole argument. Here, I filter for those cases in which their <code>startdate2</code> values are greater than 2016-01-07.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="filter.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by startdate2</span></span>
<span id="cb471-2"><a href="filter.html#cb471-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, startdate2 <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">&quot;2016-01-07&quot;</span>))</span>
<span id="cb471-3"><a href="filter.html#cb471-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-4"><a href="filter.html#cb471-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print filtered data frame</span></span>
<span id="cb471-5"><a href="filter.html#cb471-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(filterdf)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 10
##      id lastname   firstname startdate gender perf_q1 perf_q2 perf_q3 perf_q4
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1   154 McDonald   Ronald    1/9/2016  male      NA      NA      NA      NA  
## 2   155 Smith      John      1/9/2016  male      NA      NA      NA      NA  
## 3   111 Newton     Isaac     1/9/2016  male       3.3     3.3     3.4     3.3
## 4   201 Providence Cindy     1/9/2016  female     1.2     1.1     1       1  
## 5   282 Legend     John      1/9/2016  male       2.2     2.3     2.4     2.5
## # ... with 1 more variable: startdate2 &lt;date&gt;</code></pre>
</div>
<div id="supp_select_singlevariable" class="section level4" number="18.6.1.3">
<h4><span class="header-section-number">18.6.1.3</span> Select Single Variable from Data Frame</h4>
<p>To display a single variable from a data frame in our Console, within the <code>subset</code> function, we can enter the data frame object as the first argument (<code>filterdf</code>) and <code>select=</code> followed by the name of a single variable (<code>startdate</code>). Using the <code>&lt;-</code> operator, we can create a new data frame object and assign the single variable to that new object. Here, I’m calling this new object <code>temp</code>, as that signals to me that the object will be temporary and thus not used for subsequent operations.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="filter.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only one variable from a data frame</span></span>
<span id="cb473-2"><a href="filter.html#cb473-2" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, <span class="at">select=</span>startdate)</span>
<span id="cb473-3"><a href="filter.html#cb473-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-4"><a href="filter.html#cb473-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame</span></span>
<span id="cb473-5"><a href="filter.html#cb473-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(temp)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 1
##   startdate
##   &lt;chr&gt;    
## 1 1/1/2016 
## 2 1/9/2016 
## 3 1/9/2016 
## 4 1/4/2016 
## 5 1/5/2016 
## 6 1/9/2016 
## 7 1/7/2016 
## 8 1/9/2016 
## 9 1/9/2016</code></pre>
</div>
<div id="supp_select_multiplevariables" class="section level4" number="18.6.1.4">
<h4><span class="header-section-number">18.6.1.4</span> Select Multiple Variables from Data Frame</h4>
<p>If our goal is to select multiple variables from a data frame (and remove all others), we can use the <code>subset</code> function as follows. As we did above, name new data frame object using the <code>&lt;-</code> operator, and here we will overwrite the <code>filterdf</code> object we previously created. As the first argument in the <code>subset</code> function, type the name of your original data frame object (<code>mergeddf</code>). As the second argument, type <code>select=</code> followed by a vector of variable name you wish to select/retain. The order in which you enter the variable names will correspond to the order in which they appear in the new data frame object. Use the <code>c</code> (combine) function from base R with each variable name you wish to select as arguments separated by commas.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="filter.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select multiple variables</span></span>
<span id="cb475-2"><a href="filter.html#cb475-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, <span class="at">select=</span><span class="fu">c</span>(id, gender, lastname, firstname))</span>
<span id="cb475-3"><a href="filter.html#cb475-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-4"><a href="filter.html#cb475-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame</span></span>
<span id="cb475-5"><a href="filter.html#cb475-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(filterdf)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 4
##      id gender lastname   firstname
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;    
## 1   153 male   Sanchez    Alejandro
## 2   154 male   McDonald   Ronald   
## 3   155 male   Smith      John     
## 4   165 female Doe        Jane     
## 5   125 male   Franklin   Benjamin 
## 6   111 male   Newton     Isaac    
## 7   198 female Morales    Linda    
## 8   201 female Providence Cindy    
## 9   282 male   Legend     John</code></pre>
</div>
<div id="supp_remove_singlevariable" class="section level4" number="18.6.1.5">
<h4><span class="header-section-number">18.6.1.5</span> Remove Single Variable from Data Frame</h4>
<p>If you need to remove a single variable from a data frame, you can simply type the minus (<code>-</code>) operator before the name of the variable you wish to remove.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="filter.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only one variable from a data frame</span></span>
<span id="cb477-2"><a href="filter.html#cb477-2" aria-hidden="true" tabindex="-1"></a>filterdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, <span class="at">select=</span><span class="sc">-</span>startdate)</span>
<span id="cb477-3"><a href="filter.html#cb477-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-4"><a href="filter.html#cb477-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame</span></span>
<span id="cb477-5"><a href="filter.html#cb477-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(filterdf)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 9
##      id lastname   firstname gender perf_q1 perf_q2 perf_q3 perf_q4 startdate2
##   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
## 1   153 Sanchez    Alejandro male       3.9     4.8     4.9     5   2016-01-01
## 2   154 McDonald   Ronald    male      NA      NA      NA      NA   2016-01-09
## 3   155 Smith      John      male      NA      NA      NA      NA   2016-01-09
## 4   165 Doe        Jane      female    NA      NA      NA      NA   2016-01-04
## 5   125 Franklin   Benjamin  male       2.1     1.9     2.1     2.3 2016-01-05
## 6   111 Newton     Isaac     male       3.3     3.3     3.4     3.3 2016-01-09
## 7   198 Morales    Linda     female     4.9     4.5     4.4     4.8 2016-01-07
## 8   201 Providence Cindy     female     1.2     1.1     1       1   2016-01-09
## 9   282 Legend     John      male       2.2     2.3     2.4     2.5 2016-01-09</code></pre>
</div>
<div id="supp_remove_multiplevariables" class="section level4" number="18.6.1.6">
<h4><span class="header-section-number">18.6.1.6</span> Remove Multiple Variables from Data Frame</h4>
<p>If you wish to remove multiple variables from a data frame, you can apply the same syntax as you did when selecting multiple variables, except insert a minus (<code>-</code>) operator in from the of the <code>c</code> function. This tells the function to <em>not</em> select those variables. Here, we remove the <code>id</code> and <code>gender</code> variables from the <code>mergeddf</code> data frame by overwriting the original <code>mergeddf</code> object.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="filter.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove multiple variables</span></span>
<span id="cb479-2"><a href="filter.html#cb479-2" aria-hidden="true" tabindex="-1"></a>mergeddf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, <span class="at">select=</span> <span class="sc">-</span><span class="fu">c</span>(id, gender))</span>
<span id="cb479-3"><a href="filter.html#cb479-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-4"><a href="filter.html#cb479-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print data frame</span></span>
<span id="cb479-5"><a href="filter.html#cb479-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mergeddf)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 8
##   lastname   firstname startdate perf_q1 perf_q2 perf_q3 perf_q4 startdate2
##   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
## 1 Sanchez    Alejandro 1/1/2016      3.9     4.8     4.9     5   2016-01-01
## 2 McDonald   Ronald    1/9/2016     NA      NA      NA      NA   2016-01-09
## 3 Smith      John      1/9/2016     NA      NA      NA      NA   2016-01-09
## 4 Doe        Jane      1/4/2016     NA      NA      NA      NA   2016-01-04
## 5 Franklin   Benjamin  1/5/2016      2.1     1.9     2.1     2.3 2016-01-05
## 6 Newton     Isaac     1/9/2016      3.3     3.3     3.4     3.3 2016-01-09
## 7 Morales    Linda     1/7/2016      4.9     4.5     4.4     4.8 2016-01-07
## 8 Providence Cindy     1/9/2016      1.2     1.1     1       1   2016-01-09
## 9 Legend     John      1/9/2016      2.2     2.3     2.4     2.5 2016-01-09</code></pre>
</div>
</div>
<div id="str_detect_supp" class="section level3" number="18.6.2">
<h3><span class="header-section-number">18.6.2</span> Filter by Pattern Contained within String</h3>
<p>In some cases, we may wish to filter cases from a data frame object based on a pattern contained within a string (i.e., text, characters). For example, using the <code>mergeddf</code> data frame object we created above, perhaps we would like to select those cases for which their <code>firstname</code> string (i.e., value) contains a capital (“J”). To do so, we can use the <code>str_detect</code> function from the <code>stringr</code> package within either the <code>subset</code> function from base <code>R</code> or the <code>filter</code> function from the <code>dplyr</code> package.</p>
<p>To get started, make sure that you have installed and accessed the <code>stringr</code> package.</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="filter.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install stringr package if you haven&#39;t already</span></span>
<span id="cb481-2"><a href="filter.html#cb481-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [Note: You don&#39;t need to install a package every </span></span>
<span id="cb481-3"><a href="filter.html#cb481-3" aria-hidden="true" tabindex="-1"></a><span class="co"># time you wish to access it]</span></span>
<span id="cb481-4"><a href="filter.html#cb481-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="filter.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access stringr package</span></span>
<span id="cb482-2"><a href="filter.html#cb482-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>Given that this chapter supplement has focused thus far on the <code>subset</code> function from base <code>R</code>, let’s continue to use that function, but please note that you could just as easily use the <code>filter</code> function from the <code>dplyr</code> package. Using the <code>&lt;-</code> operator, we’ll assign the resulting subset data frame to an object that I’m calling <code>sub_mergeddf</code>. To the right of the <code>&lt;-</code> operator, type the name of the <code>subset</code> function as usual, and as the first argument, type the name of the original data frame object that we’ve been working with called <code>mergeddf</code>. As the second argument, type the name of the <code>str_detect</code> function. As the first argument within the <code>str_detect</code> function, type the name of the variable we wish to filter by, which in this example is <code>firstname</code>; as the second argument and within quotation marks (<code>" "</code>), type a pattern you would like to detect within text strings from the <code>firstname</code> variable. For this example, let’s detect any text string containing an uppercase “J” while noting that case sensitivity matters (e.g., “J” vs. “j”). In other words, we are filtering the data frame such that we will retain only those cases for which their <code>firstname</code> variable text strings (i.e., values) contain an uppercase “J.”</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="filter.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select cases for which firstname variable contains a &quot;J&quot;</span></span>
<span id="cb483-2"><a href="filter.html#cb483-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that case sensitivity matters (e.g., &quot;j&quot; vs. &quot;J&quot;)</span></span>
<span id="cb483-3"><a href="filter.html#cb483-3" aria-hidden="true" tabindex="-1"></a>sub_mergeddf <span class="ot">&lt;-</span> <span class="fu">subset</span>(mergeddf, <span class="fu">str_detect</span>(firstname, <span class="st">&quot;J&quot;</span>))</span></code></pre></div>
<p>Now let’s print the new data frame object we created.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="filter.html#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the data frame object</span></span>
<span id="cb484-2"><a href="filter.html#cb484-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(sub_mergeddf)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 8
##   lastname firstname startdate perf_q1 perf_q2 perf_q3 perf_q4 startdate2
##   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;    
## 1 Smith    John      1/9/2016     NA      NA      NA      NA   2016-01-09
## 2 Doe      Jane      1/4/2016     NA      NA      NA      NA   2016-01-04
## 3 Legend   John      1/9/2016      2.2     2.3     2.4     2.5 2016-01-09</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="join.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="clean.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
